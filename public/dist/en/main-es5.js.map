{"version":3,"sources":["webpack:///./src/app/app.component.html","webpack:///./src/app/image-grid/image-grid.component.html","webpack:///./src/app/modal-alert/modal-alert.component.html","webpack:///./src/app/my-map/map-overlay/location-preview/location-preview.component.html","webpack:///./src/app/my-map/map-overlay/map-overlay.component.html","webpack:///./src/app/my-map/map-overlay/trail-preview/trail-preview.component.html","webpack:///./src/app/my-map/map-redirect-with-params/map-redirect-with-params.component.html","webpack:///./src/app/my-map/my-map.component.html","webpack:///./src/app/photo/photo.component.html","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.scss","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/directives/scroll-spy.directive.ts","webpack:///./src/app/image-grid/image-grid.component.scss","webpack:///./src/app/image-grid/image-grid.component.ts","webpack:///./src/app/modal-alert/modal-alert.component.scss","webpack:///./src/app/modal-alert/modal-alert.component.ts","webpack:///./src/app/my-map/api-key-bing.ts","webpack:///./src/app/my-map/map-overlay/location-preview/location-preview.component.scss","webpack:///./src/app/my-map/map-overlay/location-preview/location-preview.component.ts","webpack:///./src/app/my-map/map-overlay/map-overlay.component.css","webpack:///./src/app/my-map/map-overlay/map-overlay.component.ts","webpack:///./src/app/my-map/map-overlay/trail-preview/trail-preview.component.scss","webpack:///./src/app/my-map/map-overlay/trail-preview/trail-preview.component.ts","webpack:///./src/app/my-map/map-redirect-with-params/map-redirect-with-params.component.scss","webpack:///./src/app/my-map/map-redirect-with-params/map-redirect-with-params.component.ts","webpack:///./src/app/my-map/my-map-routing.module.ts","webpack:///./src/app/my-map/my-map.component.css","webpack:///./src/app/my-map/my-map.component.ts","webpack:///./src/app/ol-custom/controls/geoloc-control.ts","webpack:///./src/app/ol-custom/controls/layer-control.ts","webpack:///./src/app/ol-custom/controls/my-attribution-control.ts","webpack:///./src/app/om/complex-description-data.ts","webpack:///./src/app/om/desc-references.ts","webpack:///./src/app/om/geolocation-data.ts","webpack:///./src/app/om/img-data.ts","webpack:///./src/app/om/loc-data.ts","webpack:///./src/app/om/loc-prev.response.ts","webpack:///./src/app/om/menu-entry-data.ts","webpack:///./src/app/om/menu-tree.ts","webpack:///./src/app/om/par-with-refs.ts","webpack:///./src/app/om/trail-header-data.ts","webpack:///./src/app/om/trail-par-desc.ts","webpack:///./src/app/om/trail-prev.response.ts","webpack:///./src/app/photo/photo.component.scss","webpack:///./src/app/photo/photo.component.ts","webpack:///./src/app/pipes/img-url.pipe.ts","webpack:///./src/app/services/communication/preview.service.ts","webpack:///./src/app/services/communication/sidebar-data.service.ts","webpack:///./src/app/services/locations/locations.service.ts","webpack:///./src/app/services/my-map/sentieri-layer.service.ts","webpack:///./src/app/services/my-map/vector-styles.ts","webpack:///./src/app/services/trails/trails.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main-es5.js","sourcesContent":["module.exports = \"<ng-sidebar-container style = \\\"height: 100vh\\\">\\r\\n    <!-- A sidebar -->\\r\\n    <ng-sidebar [mode]=\\\"'over'\\\"   [closeOnClickOutside]=\\\"true\\\" [(opened)]=\\\"isSideMenuOpen\\\">\\r\\n        <div class=\\\"wrapper\\\">\\r\\n            \\r\\n            <button type=\\\"button\\\" class=\\\"close cl-light\\\" aria-label=\\\"Close\\\" (click)=\\\"isSideMenuOpen =false\\\"> \\r\\n                <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n            </button>\\r\\n            <div class=\\\"ml-3 mt-0 p-0\\\">\\r\\n                    <span class=\\\"mr-2\\\"><a  href=\\\"/\\\"class=\\\"text-hide flag-icon it\\\" >Italiano</a></span>\\r\\n                    <span class=\\\"mr-2\\\"><a href=\\\"/en\\\" class=\\\"text-hide flag-icon en\\\" >English</a></span>\\r\\n            </div>\\r\\n            <a class=\\\"navbar-brand pt-0 text-aplight\\\"  href=\\\"/\\\"><i class =\\\"ap-icon-logo bigg\\\"></i></a>  \\r\\n            <ul class=\\\"nav flex-column\\\">\\r\\n                <ng-container *ngFor=\\\"let mainEntry of MenuEntries; let i = index\\\">\\r\\n                        <li class=\\\"nav-item\\\"><a \\r\\n                            [ngClass]= \\\"getAnchorClass(mainEntry.value)\\\"\\r\\n                            (click)=\\\"setActiveMenuEntriess(i, -1)\\\"\\r\\n                            >{{mainEntry.value.defName}}</a></li>\\r\\n                        \\r\\n                        \\r\\n                        <ul class=\\\"nav flex-column second-level\\\" *ngIf=\\\"mainEntry.children?.length >0\\\">\\r\\n                                \\r\\n                                    \\r\\n                                <li class=\\\"nav-item\\\"  *ngFor=\\\"let subEntry of mainEntry.children; let j = index\\\">\\r\\n                                    \\r\\n                                    <a \\r\\n                                    [ngClass]= \\\"getAnchorClass(subEntry)\\\"\\r\\n                                    (click)=\\\"setActiveMenuEntriess(i, j)\\\"\\r\\n                                    >\\r\\n                                        <span><i class=\\\"material-icons\\\" *ngIf=\\\"canGPHBeProcessed\\\"   [class.hidden]= \\\"subEntry.isExclusive  || !isEntryActive(subEntry)\\\">check</i></span> \\r\\n                                        {{subEntry.defName}}\\r\\n                                    </a>\\r\\n                                </li>\\r\\n                        </ul>\\r\\n                </ng-container>\\r\\n               \\r\\n            </ul>\\r\\n        </div>\\r\\n\\r\\n        <div id=\\\"bottom\\\" class=\\\"row ml-0 mr-0 text-center\\\">\\r\\n\\r\\n            <div class=\\\"col-12  align-self-end h4\\\">\\r\\n                <a class=\\\"text-dark mr-2\\\" href=\\\"https://www.facebook.com/abbadiapasseggiate\\\" target=\\\"_blank\\\"><i class =\\\"ap-icon-facebook\\\"></i></a>\\r\\n                <a class=\\\"text-dark\\\" href=\\\"https://twitter.com/abbadiapass\\\" target=\\\"_blank\\\"><i class =\\\"ap-icon-twitter\\\"></i></a>\\r\\n                <a class=\\\"text-dark ml-2\\\" href=\\\"https://www.instagram.com/abbadiapasseggiate/\\\" target=\\\"_blank\\\"><i class =\\\"ap-icon-instagram\\\"></i></a>\\r\\n            </div>\\r\\n            <div class=\\\"col-12  align-self-end \\\">\\r\\n            Copyright &copy; 2019 AbbadiaPasseggiate\\r\\n            </div>\\r\\n        </div>\\r\\n    </ng-sidebar>\\r\\n\\r\\n\\r\\n    <div ng-sidebar-content class=\\\".container-fluid\\\">\\r\\n        <div  [class.obscure]=\\\"isSideMenuOpen\\\"></div>\\r\\n        <router-outlet></router-outlet>\\r\\n        <router-outlet name=\\\"luoghiPopup\\\"></router-outlet>\\r\\n    </div>\\r\\n\\r\\n</ng-sidebar-container>\"","module.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"row masonry-grid\\\">\\n    <div class=\\\"col  masonry-column\\\" *ngFor =\\\"let col of colsInfo; let i = index\\\">\\n      <div *ngFor =\\\"let img of col; let j = index\\\">\\n        <img [src]=\\\"img | imgUrl\\\"  class=\\\"img-fluid my-thumb\\\" alt=\\\"{{img?.title}}\\\" (click)=\\\"openLightBox(i, j)\\\"> \\n      </div>\\n    </div>\\n\\n  </div>\\n</div>\"","module.exports = \"<div class=\\\"modal-header\\\">\\n  <h4 class=\\\"modal-title\\\" id=\\\"modal-title\\\">Attenzione!</h4>\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-describedby=\\\"modal-title\\\" (click)=\\\"modal.dismiss('Cross click')\\\">\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\n  </button>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <p>Funzionalità al momento non disponibile</p>\\n  <p><strong>Verrai reindirizzato sul vecchio sito. Continuare?</strong></p>\\n  \\n</div>\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-outline-secondary\\\" (click)=\\\"modal.dismiss('cancel click')\\\">Cancel</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-outline-primary\\\" (click)=\\\"modal.close('Ok click')\\\">Ok</button>\\n</div>\"","module.exports = \"<div class=\\\"d-flex justify-content-center\\\" *ngIf=\\\"!luogoInfos\\\">\\n  <div class=\\\"spinner-grow  text-primary\\\" role=\\\"status\\\">\\n    <span class=\\\"sr-only\\\">Caricamento...</span>\\n  </div>\\n</div>\\n\\n<div *ngIf=\\\"luogoInfos && luogoInfos.mainData && luogoInfos.mainData  && luogoInfos.mainData.description && luogoInfos.mainData.description.length> 0 \\\">\\n\\n  <p *ngFor=\\\"let desc of descData?.descriptions; let i = index\\\">\\n    \\n    <span *ngFor=\\\"let subdesc of desc; let j = index\\\">\\n      {{subdesc}}\\n      <a class =\\\"text-primary \\\" *ngIf= \\\"j<desc.length -1\\\" (click)=onDescLinkClick(descData.descRefs[i][j])> {{descData.descRefs[i][j].name}}</a>\\n    </span>\\n\\n  </p>\\n\\n  \\n</div> \\n<ng-container *ngIf=\\\"luogoInfos && luogoInfos.trailRefs && luogoInfos.trailRefs.length>0\\\">\\n  <h5>Come raggiungerlo?</h5>\\n  <div>\\n    <ul>\\n      <li *ngFor=\\\"let trailref of luogoInfos?.trailRefs\\\">\\n        <a class=\\\"text-primary\\\" (click)=\\\"this.onDescLinkClick(trailref)\\\">{{trailref.name}} </a>\\n      </li>\\n    </ul>\\n      \\n  </div>\\n</ng-container>\\n\\n\\n\\n<app-image-grid  *ngIf=\\\"luogoInfos && luogoInfos.imagesData\\\" [imageInfo] =\\\"luogoInfos?.imagesData\\\" [maxCols]=\\\"2\\\" [useLightBox]=\\\"true\\\"></app-image-grid>\\n\\n\\n\\n\"","module.exports = \"\\r\\n<div class=\\\"modal-dialog \\tmodal-lg modal-dialog-scrollable m-0\\\" role=\\\"document\\\">\\r\\n  <div class=\\\"modal-content\\\" [class.expanded]=\\\"expanded\\\">\\r\\n    <div class=\\\"modal-header\\\" (click)=\\\"expand()\\\">\\r\\n      <h4 class=\\\"modal-title\\\">{{previewResponse?.mainData.name}}</h4>\\r\\n\\r\\n      <div class=\\\"btn-group\\\" role=\\\"group\\\" >\\r\\n     \\r\\n        <button type=\\\"button\\\" class=\\\"close\\\" (click)=\\\"closePopup($event)\\\" aria-label=\\\"Close\\\"> \\r\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"modal-body\\\" scrollSpy [querySelector]=\\\"'p[scroll-inspect]'\\\" (sectionChange)=\\\"onParChange($event)\\\">\\r\\n\\r\\n      <app-location-preview *ngIf=\\\"previewResponse?.mainData?.type == 1\\\" [luogoInfos] = \\\"previewResponse\\\"></app-location-preview>\\r\\n      <app-trail-preview *ngIf=\\\"previewResponse?.mainData?.type == 2\\\" [trailInfos] = \\\"previewResponse\\\"></app-trail-preview>\\r\\n    </div>\\r\\n    <div class=\\\"modal-footer\\\">\\r\\n      <button type=\\\"button\\\" class=\\\"btn btn-outline-danger\\\" (click)=\\\"closePopup($event)\\\"    >Close</button>\\r\\n    </div>\\r\\n\\r\\n</div>\"","module.exports = \"<section class=\\\"jumbotron mt-0 text-center\\\">\\r\\n\\r\\n    <div  class=\\\"container\\\" *ngIf=\\\"trailInfos && trailInfos.mainData\\\">\\r\\n        <p *ngFor=\\\"let par of trailInfos.mainData.pars; let i  = index\\\"> \\r\\n            <span *ngFor=\\\"let subdesc of par.descriptions; let j = index\\\">\\r\\n                {{subdesc}}\\r\\n                <a class =\\\"text-primary \\\" (click) = \\\"onRefClick(par.descRefs[j])\\\"  *ngIf= \\\"j<par.descriptions.length -1\\\"> {{par.descRefs[j].name}}</a>\\r\\n            </span>\\r\\n        </p>\\r\\n    </div>\\r\\n\\r\\n</section>\\r\\n\\r\\n<div *ngIf=\\\"trailInfos && trailInfos.pars\\\" >\\r\\n    <p *ngFor=\\\"let par of trailInfos.pars; let i  = index\\\" [id]=\\\"'par_' + par.parIndex\\\" [class.emph] =\\\"isParSelected(par)\\\" scroll-inspect> \\r\\n        <span *ngFor=\\\"let subdesc of par.descriptions; let j = index\\\">\\r\\n            {{subdesc}}\\r\\n            <a class =\\\"text-primary \\\" (click) = \\\"onRefClick(par.descRefs[j])\\\" *ngIf= \\\"j<par.descriptions.length -1\\\"> {{par.descRefs[j].name}}</a>\\r\\n        </span>\\r\\n    </p>\\r\\n</div>\\r\\n\\r\\n\\r\\n\"","module.exports = \"<p>\\n  map-redirect-with-params works!\\n</p>\\n\"","module.exports = \"\\r\\n<div id=\\\"map\\\" class=\\\"p-0\\\"></div>\\r\\n\\r\\n\\r\\n<button  #geolocBtn class=\\\"ap-control my-geoloc btn \\\"     \\r\\n    [class.btn-outline-danger]=\\\"geolocControl.geolocationData.status==0\\\"   \\r\\n    [class.btn-outline-warning]=\\\"geolocControl.geolocationData.status==2\\\"   \\r\\n    [class.btn-outline-success]=\\\"geolocControl.geolocationData.status==1\\\"  \\r\\n    [class.tras02]=\\\"true\\\" \\r\\n    (click)=\\\"geolocControl.toggleLocation()\\\" > <span><i class=\\\"material-icons\\\">\\r\\n        my_location\\r\\n        </i></span></button>\\r\\n\\r\\n\\r\\n<button  class=\\\"ap-control my-menu btn btn-outline-aplight tras02 \\\" (click)= \\\"onMenuClick()\\\">\\r\\n    <span><i class=\\\"material-icons\\\">\\r\\n    menu\\r\\n    </i></span></button>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n<div  #attributionCtrl class=\\\"\\\" >\\r\\n    <button type=\\\"button\\\" class=\\\"ap-control my-attribution btn btn-outline-aplight tras02\\\"  [hidden]=\\\"attributionControl.collapsed\\\" (click)=\\\"attributionControl.toggleCollapsed()\\\"><span ><i class=\\\"material-icons\\\"> info </i></span></button>\\r\\n    <button type=\\\"button\\\" class=\\\"ap-control my-attribution btn btn-outline-aplight tras02\\\"  [hidden]=\\\"!attributionControl.collapsed\\\"  (click)=\\\"attributionControl.toggleCollapsed()\\\"><span ><i class=\\\"material-icons\\\"> chevron_left </i></span></button>\\r\\n    <div [ngbCollapse]= \\\"!attributionControl.collapsed\\\" class= \\\"ap-control my-attribution card\\\">\\r\\n        <span *ngFor= \\\"let attr of attributionControl.attribution\\\" [innerHTML]=\\\"attr\\\"></span>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div  #LayerCtrl class=\\\"\\\" >\\r\\n    <button type=\\\"button\\\" class=\\\"ap-control my-layer-ctrl btn btn-outline-aplight tras02\\\"  [hidden]=\\\"layerControl.collapsed\\\" (click)=\\\"layerControl.toggleCollapsed()\\\"><span ><i class=\\\"material-icons\\\"> layers </i></span></button>\\r\\n    <button type=\\\"button\\\" class=\\\"ap-control my-layer-ctrl btn btn-outline-aplight tras02\\\"  [hidden]=\\\"!layerControl.collapsed\\\"  (click)=\\\"layerControl.toggleCollapsed()\\\"><span ><i class=\\\"material-icons\\\"> chevron_left </i></span></button>\\r\\n    <div [ngbCollapse]= \\\"!layerControl.collapsed\\\" class= \\\"ap-control my-layer-ctrl card\\\">\\r\\n        <div class=\\\"row no-gutters\\\" >\\r\\n            <div class=\\\"col layer-prew\\\" *ngFor=\\\"let opt of layerControl.visibleLayersKeys\\\" >\\r\\n                    <a  (click)=\\\"layerControl.setLayerVisible(opt)\\\"  >\\r\\n                        <img  [src]=\\\"'assets/img/thumb/' + opt + '.jpg'\\\" class=\\\"img-thumbnail\\\" [class.border-primary]=\\\"layerControl.activeLayerKey==opt\\\"  > \\r\\n                    </a>\\r\\n            </div>\\r\\n        </div>\\r\\n        \\r\\n    </div>\\r\\n</div>\\r\\n\"","module.exports = \"<nav class=\\\"navbar navbar-light bg-dark\\\">\\n  <button  class=\\\"btn btn-outline-aplight \\\" (click)= \\\"onMenuClick()\\\">\\n    <span><i class=\\\"material-icons\\\">menu</i></span>\\n  </button>\\n</nav>\\n<main role=\\\"main\\\">\\n\\n  <section class=\\\"jumbotron mb-0 text-center\\\">\\n    <div class=\\\"container\\\">\\n      <h1 class=\\\"jumbotron-heading\\\">Galleria Fotografica</h1>\\n      <p class=\\\"lead text-muted\\\">In corrispondenza del suo primo anniversario, Abbadia Passeggiate innaugura questa galleria immagini contenente le migliori foto delle (e dalle) nostre montagne.</p>\\n\\n      <p>Tutte le immagini, salvo dove indicato diversamente, provengono dalla collezione di Abbadia Passeggiate.</p>\\n      <!-- <p>\\n        <a href=\\\"#\\\" class=\\\"btn btn-primary my-2\\\">Main call to action</a>\\n        <a href=\\\"#\\\" class=\\\"btn btn-secondary my-2\\\">Secondary action</a>\\n      </p> -->\\n    </div>\\n  </section>\\n\\n  <div class=\\\"album py-5 bg-light\\\">\\n    <div class=\\\"container\\\">\\n\\n      <div class=\\\"row\\\" >\\n        \\n        <div class=\\\"col-md-4\\\"   *ngFor=\\\"let photo of photos\\\">\\n          <div class=\\\"card mb-4 box-shadow\\\" >\\n            <img class=\\\"card-img-top\\\" src =\\\"..\\\\..\\\\assets\\\\icons\\\\icons\\\\ap\\\\logo.svg\\\" alt=\\\"Card image cap\\\">\\n            <div class=\\\"card-body\\\">\\n              <p class=\\\"card-text\\\">Descrizione della bellissima immagine {{photo}}</p>\\n              <div class=\\\"d-flex justify-content-between align-items-center\\\">\\n                <div class=\\\"btn-group\\\">\\n                  <button type=\\\"button\\\" class=\\\"btn btn-sm btn-outline-secondary\\\">View</button>\\n                </div>\\n                <small class=\\\"text-muted\\\">9 mins</small>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n        \\n        \\n      </div>\\n    </div>\\n  </div>\\n\\n</main>\\n\\n\"","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule }              from '@angular/core';\r\nimport { RouterModule, Routes }  from '@angular/router';\r\nimport { PhotoComponent } from './photo/photo.component';\r\n\r\n\r\nconst appRoutes: Routes = [\r\n\r\n  { path: '',\r\n    redirectTo: '/map-default', \r\n    pathMatch: 'full' },\r\n  {\r\n    path: 'photo',\r\n    component: PhotoComponent\r\n  }\r\n//   { path: '**', component: PageNotFoundComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forRoot(\r\n      appRoutes,\r\n      { enableTracing: false } // <-- debugging purposes only\r\n    )\r\n  ],\r\n  exports: [\r\n    RouterModule\r\n  ]\r\n})\r\nexport class AppRoutingModule {}\r\n","module.exports = \".flag-icon {\\n  display: inline-block;\\n  background: none;\\n  width: 22px;\\n  height: 20px;\\n  background-repeat: no-repeat;\\n  background-size: cover;\\n}\\n\\n.flag-icon.it {\\n  background-image: url('it.svg');\\n}\\n\\n.flag-icon.en {\\n  background-image: url('en.svg');\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvQzpcXFVzZXJzXFxQYW9sb1xcU3ZpbHVwcG9cXEFiYmFkaWFQYXNzZWdnaWF0ZVxcQWJiYWRpYVBhc3NlZ2dpYXRlL3NyY1xcYXBwXFxhcHAuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLHFCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLDRCQUFBO0VBQ0Esc0JBQUE7QUNBSjs7QURHQTtFQUVJLCtCQUFBO0FDREo7O0FESUE7RUFFSSwrQkFBQTtBQ0ZKIiwiZmlsZSI6InNyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmZsYWctaWNvblxyXG57XHJcbiAgICBkaXNwbGF5OmlubGluZS1ibG9jaztcclxuICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICB3aWR0aDogMjJweDsgXHJcbiAgICBoZWlnaHQ6IDIwcHg7XHJcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcclxufVxyXG5cclxuLmZsYWctaWNvbi5pdFxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2Fzc2V0cy9pY29ucy9pY29ucy9hcC9pdC5zdmcnKTtcclxufVxyXG5cclxuLmZsYWctaWNvbi5lblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2Fzc2V0cy9pY29ucy9pY29ucy9hcC9lbi5zdmcnKTtcclxufSIsIi5mbGFnLWljb24ge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIHdpZHRoOiAyMnB4O1xuICBoZWlnaHQ6IDIwcHg7XG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG59XG5cbi5mbGFnLWljb24uaXQge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJhc3NldHMvaWNvbnMvaWNvbnMvYXAvaXQuc3ZnXCIpO1xufVxuXG4uZmxhZy1pY29uLmVuIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiYXNzZXRzL2ljb25zL2ljb25zL2FwL2VuLnN2Z1wiKTtcbn0iXX0= */\"","import { Component, OnInit, AfterViewInit, AfterViewChecked } from '@angular/core';\r\nimport { SidebarDataService } from './services/communication/sidebar-data.service';\r\nimport { MenuTree } from './om/menu-tree';\r\nimport { MenuEntryData, MenuEntryStatus } from './om/menu-entry-data';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  \r\n  /**\r\n   * Added to skip some view changes on the loading of the page, that are triggered by some modification in sidebarDataServices.\r\n   * These changes can lead to angular exceptions (ExpressionChangedAfterItHasBeenCheckedError)\r\n   */\r\n  public canGPHBeProcessed = false;\r\n  \r\n  ngOnInit(): void {\r\n    \r\n    this.sidebarDataService.isOpen$.subscribe(val=>\r\n      { \r\n        if(!this.canGPHBeProcessed && val)\r\n          this.canGPHBeProcessed = true;\r\n        this.isSideMenuOpen = val\r\n      });\r\n\r\n  }\r\n\r\n\r\n  constructor(\r\n    private sidebarDataService: SidebarDataService,\r\n    private activateRoute:ActivatedRoute,\r\n    private router: Router\r\n    ){}\r\n\r\n\r\n  public isSideMenuOpen : boolean;\r\n\r\n  public get MenuEntries() : MenuTree<MenuEntryData>[]\r\n  {\r\n    return this.sidebarDataService.menuEntries;\r\n  }\r\n\r\n\r\n  public isEntryActive(entry:MenuEntryData) : boolean\r\n  {\r\n    return entry.status == MenuEntryStatus.Active;\r\n  }\r\n\r\n  public isEntryDefault(entry:MenuEntryData) : boolean\r\n  {\r\n    return entry.status == MenuEntryStatus.Default;\r\n  }\r\n\r\n  public isEntryDisabled(entry:MenuEntryData) : boolean\r\n  {\r\n    return entry.status == MenuEntryStatus.Disable;\r\n  }\r\n\r\n  public setActiveMenuEntriess(selectedMain:number, selectedSub : number)\r\n  {\r\n    this.sidebarDataService.setActiveEntries(selectedMain, selectedSub);\r\n  }\r\n\r\n  public getAnchorClass(entry:MenuEntryData):string\r\n  {\r\n    if(!this.canGPHBeProcessed)\r\n      return \"\";\r\n    let result:string;\r\n\r\n\r\n    if(this.isEntryDisabled(entry))\r\n      result= \"nav-link disabled\";\r\n    else if(this.isEntryDefault(entry))\r\n      result = \"nav-link text-aplight\";\r\n    else if(this.isEntryActive(entry))\r\n      result = \"text-aplight nav-link active\";\r\n\r\n\r\n    return result;\r\n  }\r\n\r\n\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { LOCALE_ID, NgModule } from '@angular/core';\r\nimport {AppRoutingModule} from './app-routing.module'\r\nimport {MyMapRoutingModule} from './my-map/my-map-routing.module'\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport {NgbModule} from '@ng-bootstrap/ng-bootstrap';\r\nimport { LightboxModule } from 'ngx-lightbox';\r\nimport { SidebarModule } from 'ng-sidebar';\r\nimport { NgScrollbarModule } from 'ngx-scrollbar';\r\n\r\n\r\nimport {LocationsService} from './services/locations/locations.service'\r\nimport {TrailsService} from './services/trails/trails.service'\r\nimport {PreviewService} from './services/communication/preview.service'\r\nimport {SidebarDataService} from './services/communication/sidebar-data.service'\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { MyMapComponent } from './my-map/my-map.component';\r\nimport { MapOverlayComponent } from './my-map/map-overlay/map-overlay.component';\r\nimport { ImgUrlPipe } from './pipes/img-url.pipe';\r\nimport { ImageGridComponent } from './image-grid/image-grid.component';\r\nimport { ModalAlertComponent } from './modal-alert/modal-alert.component';\r\nimport { PhotoComponent } from './photo/photo.component';\r\nimport { MapRedirectWithParamsComponent } from './my-map/map-redirect-with-params/map-redirect-with-params.component';\r\nimport { LocationPreviewComponent } from './my-map/map-overlay/location-preview/location-preview.component';\r\nimport { TrailPreviewComponent } from './my-map/map-overlay/trail-preview/trail-preview.component';\r\nimport { ScrollSpyDirective } from './directives/scroll-spy.directive';\r\nimport { environment } from '../environments/environment';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    MyMapComponent,\r\n    MapOverlayComponent,\r\n    ImgUrlPipe,\r\n    ImageGridComponent,\r\n    ModalAlertComponent,\r\n    PhotoComponent,\r\n    MapRedirectWithParamsComponent,\r\n    LocationPreviewComponent,\r\n    TrailPreviewComponent,\r\n    ScrollSpyDirective\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    MyMapRoutingModule,\r\n    HttpClientModule,\r\n    NgbModule,\r\n    LightboxModule,\r\n    SidebarModule.forRoot(),\r\n    NgScrollbarModule\r\n  ] ,\r\n  entryComponents : [ModalAlertComponent],\r\n  providers: [  LocationsService,\r\n                TrailsService,\r\n                PreviewService,\r\n                SidebarDataService,\r\n                ImgUrlPipe,\r\n                { provide: LOCALE_ID, useValue: environment.locale }\r\n              ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Directive, Input, Output, HostListener, EventEmitter, ElementRef, ɵConsole } from '@angular/core';\n\n@Directive({\n  selector: '[scrollSpy]'\n})\nexport class ScrollSpyDirective {\n  @Input() public querySelector :string ;\n  @Input() public useOffset : boolean = false;\n  @Input() public offset : number = 0;\n  @Output() public sectionChange = new EventEmitter<string>();\n  private currentSection: string;\n\n  constructor(private _el: ElementRef) {}\n\n  @HostListener('scroll', ['$event'])\n  onScroll(event: any) {\n      let currentSection: string;\n      const children = this._el.nativeElement.children;\n      const scrollTop = event.target.scrollTop;\n\n      let offset = this.useOffset? this.offset : this.getOffset(event.target);\n      const parentOffset = event.target.offsetTop;\n      for (let i = 0; i < children.length; i++) {\n          const element = children[i];\n          let selectedEls = (element as Element).querySelectorAll(this.querySelector)\n          for (let j = 0; j < selectedEls.length; j++)\n          {\n                let selectedElement = selectedEls[j] as any;\n                if ((selectedElement.offsetTop - parentOffset) <= scrollTop + offset) {\n                    currentSection = selectedEls[j].id;\n            }\n          }\n      }\n      if (currentSection !== this.currentSection) {\n          this.currentSection = currentSection;\n          this.sectionChange.emit(this.currentSection);\n      }\n  }\n\n  getScrollPercentage(targetEl)\n  {\n      if(targetEl.scrollHeight -targetEl.offsetHeight == 0)\n        return 0;\n      return targetEl.scrollTop/ (targetEl.scrollHeight -targetEl.offsetHeight)\n\n  }\n\n  getOffset(targetEl)\n  {\n      return this.getScrollPercentage(targetEl) * targetEl.offsetHeight;\n  }\n\n}\n\n","module.exports = \".masonry-column {\\n  padding: 0 1px;\\n}\\n\\n.masonry-grid > div .my-thumb {\\n  margin: 5px 1px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaW1hZ2UtZ3JpZC9DOlxcVXNlcnNcXFBhb2xvXFxTdmlsdXBwb1xcQWJiYWRpYVBhc3NlZ2dpYXRlXFxBYmJhZGlhUGFzc2VnZ2lhdGUvc3JjXFxhcHBcXGltYWdlLWdyaWRcXGltYWdlLWdyaWQuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2ltYWdlLWdyaWQvaW1hZ2UtZ3JpZC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGNBQUE7QUNDSjs7QURFRTtFQUNFLGVBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL2ltYWdlLWdyaWQvaW1hZ2UtZ3JpZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXNvbnJ5LWNvbHVtbiB7XHJcbiAgICBwYWRkaW5nOiAwIDFweDtcclxuICB9XHJcbiAgXHJcbiAgLm1hc29ucnktZ3JpZCA+IGRpdiAubXktdGh1bWIge1xyXG4gICAgbWFyZ2luOiA1cHggMXB4O1xyXG4gIH1cclxuICAiLCIubWFzb25yeS1jb2x1bW4ge1xuICBwYWRkaW5nOiAwIDFweDtcbn1cblxuLm1hc29ucnktZ3JpZCA+IGRpdiAubXktdGh1bWIge1xuICBtYXJnaW46IDVweCAxcHg7XG59Il19 */\"","import { Component, OnInit, Input, OnChanges, HostListener } from '@angular/core';\nimport { APImageData } from '../om/img-data';\nimport { ImgUrlPipe } from '../pipes/img-url.pipe';\nimport { Lightbox } from 'ngx-lightbox';\nimport { windowWhen } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-image-grid',\n  templateUrl: './image-grid.component.html',\n  styleUrls: ['./image-grid.component.scss']\n})\nexport class ImageGridComponent implements OnInit, OnChanges {\n\n\n  @Input()\n  private imageInfo :APImageData[];\n  \n  @Input()\n  private maxCols :number\n\n  @Input()\n  private useLightBox :boolean\n\n  colsInfo : APImageData[][];\n  \n  constructor(private lightBox : Lightbox,\n              private imgPipe : ImgUrlPipe) { }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges(changes: import(\"@angular/core\").SimpleChanges): void {\n    this.redrawGrid(this.maxCols);\n  \n  }\n\n  private redrawGrid(maxColNumber: number) {\n    this.colsInfo = [];\n    if(!this.imageInfo || this.imageInfo.length == 0)\n    {\n      return;\n    }\n      \n    for (let i = 0; i < maxColNumber; i++) {\n      this.colsInfo[i] = [];\n    }\n    this.imageInfo.forEach((img: APImageData, i: number) => {\n          this.colsInfo[i % maxColNumber].push(img);\n    });\n    let emptyIndex = this.colsInfo.findIndex(col => col.length == 0);\n    if (emptyIndex != -1)\n      this.colsInfo.splice(emptyIndex, maxColNumber - emptyIndex - 1);\n    \n    this.maxCols = maxColNumber;\n  }\n\n  openLightBox(colindex: number, rowindex : number): void {\n    if (!this.useLightBox)\n      return;\n\n    // open lightbox\n    let index = rowindex*this.maxCols + colindex\n    let lightBoxAlbum = this.imageInfo.map (image=> \n    {\n      let desc: string = \"<h5>\" +image.title + \"</h5>\";\n      if(image.description != null)\n        image.description.forEach(descPar => desc += \"<p>\" + descPar + \"</p> \");\n\n      return {\n        src : this.imgPipe.transform(image, true) ,\n        caption : desc,\n        thumb: this.imgPipe.transform(image, false) \n        \n      } ;\n    });\n    this.lightBox.open(lightBoxAlbum, index);\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event) {\n    let innerWidth = window.innerWidth;\n    \n    \n    let newColNum:number = innerWidth < 576  ? 1 : this.maxCols;\n    if (newColNum != this.maxCols )\n    {\n      this.redrawGrid(newColNum);\n    }\n  }\n\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZGFsLWFsZXJ0L21vZGFsLWFsZXJ0LmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'app-modal-alert',\n  templateUrl: './modal-alert.component.html',\n  styleUrls: ['./modal-alert.component.scss']\n})\nexport class ModalAlertComponent implements OnInit {\n\n  constructor(public modal: NgbActiveModal) {}\n\n  ngOnInit() {\n  }\n\n}\n","export const API_KEY_BING={\n    key:  'Ai9-269FPOE2hv5jRs1OksKKe-XaEyr_TC_61-gmnVMyIz3kzp5YvL50vjj1KiiS',\n};","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL215LW1hcC9tYXAtb3ZlcmxheS9sb2NhdGlvbi1wcmV2aWV3L2xvY2F0aW9uLXByZXZpZXcuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { LocationPreviewResponse } from '../../../om/loc-prev.response';\nimport { ComplexDescriptionData } from '../../../om/complex-description-data';\nimport { ImgUrlPipe } from '../../../pipes/img-url.pipe';\nimport { Lightbox } from 'ngx-lightbox';\nimport { DescReferences } from '../../../om/desc-references';\nimport { PreviewService } from '../../../services/communication/preview.service';\n\n@Component({\n  selector: 'app-location-preview',\n  templateUrl: './location-preview.component.html',\n  styleUrls: ['./location-preview.component.scss']\n})\nexport class LocationPreviewComponent implements OnInit {\n\n   \n  \n  _luogoInfos: LocationPreviewResponse = null;\n  _descData: ComplexDescriptionData;\n  \n  \n  public get luogoInfos():LocationPreviewResponse\n  {\n    return this._luogoInfos;\n  }\n\n  @Input()\n  public set luogoInfos(val: LocationPreviewResponse)\n  {\n\n    this._luogoInfos = val;\n    this.updateDescData()\n  }\n\n  public get descData():ComplexDescriptionData\n  {\n    return this._descData;\n  }\n  \n  constructor(    \n              private lightBox : Lightbox,\n              private imgPipe : ImgUrlPipe, \n              private previewService:PreviewService){ }\n\n  ngOnInit() {\n  }\n\n\n  updateDescData()\n  {\n    if(this._luogoInfos)\n      this._descData = new ComplexDescriptionData(this._luogoInfos.mainData);\n    else  \n      this._descData = new ComplexDescriptionData();\n\n  }\n\n\n  openLightBox(index: number): void {\n    // open lightbox\n    let lightBoxAlbum = this.luogoInfos.imagesData.map (image=> \n    {\n      let desc: string = \"<h5>\" +image.title + \"</h5>\";\n      if(image.description != null)\n        image.description.forEach(descPar => desc += \"<p>\" + descPar + \"</p> \");\n\n      return {\n        src : this.imgPipe.transform(image, true) ,\n        caption : desc,\n        thumb: this.imgPipe.transform(image, false) \n        \n      } ;\n    });\n    this.lightBox.open(lightBoxAlbum, index);\n  }\n\n  onDescLinkClick(ref: DescReferences)\n  {\n    this.previewService.setNewRef(ref);\n  }\n\n\n\n}\n","module.exports = \" :host() { \\r\\n    \\r\\n    background-color: rgba(256,256,256,0);\\r\\n    display: block;\\r\\n    left: 0;\\r\\n    width: 100%;\\r\\n    bottom: 0%;\\r\\n    padding: 0;\\r\\n   \\r\\n\\r\\n    /*TODO: sostituire classe host con qualcosa di meglio => laterale se monitor, centrale altrimenti, al massimo con parte sotto libera*/\\r\\n} \\r\\n\\r\\n.modal-content\\r\\n{\\r\\n    height: 50vh;\\r\\n} \\r\\n\\r\\n.modal-content.expanded\\r\\n{\\r\\n    height: 90vh;\\r\\n} \\r\\n\\r\\n@media (min-width: 992px) {\\r\\n    :host() { \\r\\n    \\r\\n        width: 60%;\\r\\n        top:10%;\\r\\n    } \\r\\n    .modal-content\\r\\n    {\\r\\n        height: 90vh;\\r\\n    }\\r\\n    .hidden-xl-up\\r\\n    {\\r\\n        display: none;\\r\\n    }\\r\\n} \\r\\n\\r\\n@media (min-width: 1200px) { \\r\\n    :host() { \\r\\n        width: 30%;\\r\\n    } \\r\\n }\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbXktbWFwL21hcC1vdmVybGF5L21hcC1vdmVybGF5LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBQUM7O0lBRUcscUNBQXFDO0lBQ3JDLGNBQWM7SUFDZCxPQUFPO0lBQ1AsV0FBVztJQUNYLFVBQVU7SUFDVixVQUFVOzs7SUFHVixxSUFBcUk7QUFDekk7O0FBRUE7O0lBRUksWUFBWTtBQUNoQjs7QUFFQTs7SUFFSSxZQUFZO0FBQ2hCOztBQUlBO0lBQ0k7O1FBRUksVUFBVTtRQUNWLE9BQU87SUFDWDtJQUNBOztRQUVJLFlBQVk7SUFDaEI7SUFDQTs7UUFFSSxhQUFhO0lBQ2pCO0FBQ0o7O0FBRUE7SUFDSTtRQUNJLFVBQVU7SUFDZDtDQUNIIiwiZmlsZSI6InNyYy9hcHAvbXktbWFwL21hcC1vdmVybGF5L21hcC1vdmVybGF5LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIgOmhvc3QoKSB7IFxyXG4gICAgXHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NiwyNTYsMjU2LDApO1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3R0b206IDAlO1xyXG4gICAgcGFkZGluZzogMDtcclxuICAgXHJcblxyXG4gICAgLypUT0RPOiBzb3N0aXR1aXJlIGNsYXNzZSBob3N0IGNvbiBxdWFsY29zYSBkaSBtZWdsaW8gPT4gbGF0ZXJhbGUgc2UgbW9uaXRvciwgY2VudHJhbGUgYWx0cmltZW50aSwgYWwgbWFzc2ltbyBjb24gcGFydGUgc290dG8gbGliZXJhKi9cclxufSBcclxuXHJcbi5tb2RhbC1jb250ZW50XHJcbntcclxuICAgIGhlaWdodDogNTB2aDtcclxufVxyXG5cclxuLm1vZGFsLWNvbnRlbnQuZXhwYW5kZWRcclxue1xyXG4gICAgaGVpZ2h0OiA5MHZoO1xyXG59XHJcblxyXG5cclxuXHJcbkBtZWRpYSAobWluLXdpZHRoOiA5OTJweCkge1xyXG4gICAgOmhvc3QoKSB7IFxyXG4gICAgXHJcbiAgICAgICAgd2lkdGg6IDYwJTtcclxuICAgICAgICB0b3A6MTAlO1xyXG4gICAgfSBcclxuICAgIC5tb2RhbC1jb250ZW50XHJcbiAgICB7XHJcbiAgICAgICAgaGVpZ2h0OiA5MHZoO1xyXG4gICAgfVxyXG4gICAgLmhpZGRlbi14bC11cFxyXG4gICAge1xyXG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICB9XHJcbn1cclxuXHJcbkBtZWRpYSAobWluLXdpZHRoOiAxMjAwcHgpIHsgXHJcbiAgICA6aG9zdCgpIHsgXHJcbiAgICAgICAgd2lkdGg6IDMwJTtcclxuICAgIH0gXHJcbiB9Il19 */\"","import { Component, OnInit, HostBinding, ViewChild } from '@angular/core';\r\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { switchMap} from 'rxjs/operators';\r\n\r\nimport {LocationsService} from '../../services/locations/locations.service';\r\nimport { PreviewService } from '../../services/communication/preview.service';\r\nimport {  DescRefTypes} from '../../om/desc-references';\r\nimport { PreviewResponse } from '../../om/prev.response';\r\nimport { TrailsService } from '../../services/trails/trails.service';\r\nimport { TrailPreviewComponent } from './trail-preview/trail-preview.component';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'overlay',\r\n  templateUrl: './map-overlay.component.html',\r\n  styleUrls: ['./map-overlay.component.css']\r\n})\r\nexport class MapOverlayComponent implements OnInit {\r\n  // @HostBinding('@routeAnimation') routeAnimation = true;\r\n  @HostBinding('style.display') display = 'block';\r\n  @HostBinding('style.position') position = 'absolute';\r\n // @HostBinding('class.modal') \r\n\r\n @ViewChild(TrailPreviewComponent, {static: false}) trailComponent: TrailPreviewComponent;\r\n\r\n  previewResponse : PreviewResponse;\r\n\r\n  expanded :boolean;\r\n\r\n\r\n\r\n\r\n  constructor(private router: Router,\r\n    private activatedRoute: ActivatedRoute,\r\n    private locationService: LocationsService,\r\n    private trailsService : TrailsService,\r\n    private previewService:PreviewService ) { }\r\n\r\n  ngOnInit() {\r\n    \r\n    this.activatedRoute.paramMap\r\n    .pipe(\r\n      switchMap((params: ParamMap) =>  \r\n        {\r\n\r\n\r\n          this.previewResponse = null;\r\n          if(+params.get('type')==1)\r\n            return this.locationService.getLocationData( +params.get('id'));\r\n          else\r\n            return this.trailsService.getTrailData( +params.get('id'));\r\n        }\r\n      )  \r\n    )\r\n    .subscribe(res =>{ \r\n      this.previewResponse=res\r\n    })\r\n  }\r\n\r\n\r\n\r\n  closePopup(event:any) {\r\n    // Providing a `null` value to the named outlet\r\n    // clears the contents of the named outlet\r\n    this.previewService.setState(false);\r\n    this.router.navigate(\r\n      [{ outlets: { luoghiPopup: null } }],\r\n      {relativeTo: this.activatedRoute.parent} // <--- PARENT activated route.\r\n      );\r\n    event.stopPropagation();\r\n  }\r\n\r\n  onParChange(elementId:string)\r\n  {\r\n    if(this.trailComponent)\r\n    {\r\n      this.trailComponent.onParChange(elementId);\r\n    }\r\n  }\r\n\r\n\r\n  expand()\r\n  {\r\n    this.expanded = !this.expanded;\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","module.exports = \"@media (min-width: 992px) {\\n  p.emph {\\n    font-weight: 500;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbXktbWFwL21hcC1vdmVybGF5L3RyYWlsLXByZXZpZXcvQzpcXFVzZXJzXFxQYW9sb1xcU3ZpbHVwcG9cXEFiYmFkaWFQYXNzZWdnaWF0ZVxcQWJiYWRpYVBhc3NlZ2dpYXRlL3NyY1xcYXBwXFxteS1tYXBcXG1hcC1vdmVybGF5XFx0cmFpbC1wcmV2aWV3XFx0cmFpbC1wcmV2aWV3LmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9teS1tYXAvbWFwLW92ZXJsYXkvdHJhaWwtcHJldmlldy90cmFpbC1wcmV2aWV3LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0k7SUFFSSxnQkFBQTtFQ0ROO0FBQ0YiLCJmaWxlIjoic3JjL2FwcC9teS1tYXAvbWFwLW92ZXJsYXkvdHJhaWwtcHJldmlldy90cmFpbC1wcmV2aWV3LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbkBtZWRpYSAobWluLXdpZHRoOiA5OTJweCkge1xyXG4gICAgcC5lbXBoIFxyXG4gICAge1xyXG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgICB9XHJcbn1cclxuIiwiQG1lZGlhIChtaW4td2lkdGg6IDk5MnB4KSB7XG4gIHAuZW1waCB7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgfVxufSJdfQ== */\"","import { Component, OnInit, Input, AfterViewInit, ViewChild } from '@angular/core';\nimport { TrailPreviewResponse } from '../../../om/trail-prev.response';\nimport { DescReferences } from '../../../om/desc-references';\nimport { PreviewService } from '../../../services/communication/preview.service';\nimport { TrailParDesc } from '../../../om/trail-par-desc';\n\n\n@Component({\n  selector: 'app-trail-preview',\n  templateUrl: './trail-preview.component.html',\n  styleUrls: ['./trail-preview.component.scss']\n})\nexport class TrailPreviewComponent  {\n\n\n  \n\n  private _trailInfos : TrailPreviewResponse;\n  @Input()\n  public set  trailInfos (val : TrailPreviewResponse)\n  {\n    this._trailInfos = val;\n    this.previewService.setTrailHeaderData(this._trailInfos.mainData);\n    // reset paragraph position when a new location is loaded\n    this.previewService.setTrailActiveSection(TrailParDesc.getDummyTrailParDesc());\n  }\n  public get trailInfos() : TrailPreviewResponse\n  {\n    return this._trailInfos;\n  }\n  \n  private _currentPar : TrailParDesc\n\n  private set currentPar(val : TrailParDesc)\n  {\n    this._currentPar = val;\n    this.previewService.setTrailActiveSection(val);\n  }\n\n  private get currentPar() : TrailParDesc\n  {\n    return this._currentPar;\n  }\n\n\n  constructor(private previewService : PreviewService) {\n   }\n\n  onParChange(elemId: string) {\n\n    if(!elemId)\n    {\n      this.currentPar = null;\n      return;\n    }\n    let matchResult :RegExpMatchArray =elemId.match(/par_\\d*/);\n    if(!matchResult || matchResult.length == 0 || !this.trailInfos || ! this.trailInfos.pars )\n    {\n      this.currentPar = null;\n    }\n    else\n    {\n      let parIndex:number  = + elemId.replace(\"par_\", \"\");\n      this.currentPar = this.trailInfos.pars.find(par => par.parIndex == parIndex);\n    }\n    \n  }\n\n  isParSelected(paragraph : TrailParDesc) : boolean\n  {\n    return this.currentPar && paragraph.parIndex == this.currentPar.parIndex  && paragraph.mainTrailsID == this.currentPar.mainTrailsID ;\n  }\n  \n\n  \n  onRefClick(ref : DescReferences)\n  {\n    this.previewService.setNewRef(ref);\n  } \n\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL215LW1hcC9tYXAtcmVkaXJlY3Qtd2l0aC1wYXJhbXMvbWFwLXJlZGlyZWN0LXdpdGgtcGFyYW1zLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-map-redirect-with-params',\n  templateUrl: './map-redirect-with-params.component.html',\n  styleUrls: ['./map-redirect-with-params.component.scss']\n})\nexport class MapRedirectWithParamsComponent  {\n\n  constructor( router: Router){\n    router.navigate(['/map', {loc:1, trails:0}])\n  }\n\n\n}\n","import { NgModule }             from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {MapOverlayComponent} from \"./map-overlay/map-overlay.component\";\r\nimport { MyMapComponent } from './my-map.component';\r\nimport { MapRedirectWithParamsComponent } from './map-redirect-with-params/map-redirect-with-params.component';\r\n\r\nconst myMapRoutes: Routes = [\r\n    {\r\n        path: 'map',\r\n        component: MyMapComponent\r\n    },\r\n    {\r\n      path: 'map-default',\r\n        component: MapRedirectWithParamsComponent\r\n    },\r\n    {\r\n        path: 'luoghiPrewiew/:id/:type',\r\n        component: MapOverlayComponent,\r\n        outlet: 'luoghiPopup'\r\n      }\r\n  ];    \r\n\r\n  @NgModule({\r\n    imports: [\r\n      RouterModule.forChild(myMapRoutes)\r\n    ],\r\n    exports: [\r\n      RouterModule\r\n    ]\r\n  })\r\n  export class MyMapRoutingModule { }\r\n\r\n  ","module.exports = \"\\r\\n\\r\\n#map {\\r\\n    height: 100vh;\\r\\n}\\r\\n\\r\\n\\r\\n.geo-dot circle\\r\\n{\\r\\n    stroke:#fff;\\r\\n    stroke-width:3;\\r\\n    fill:#2A93EE;\\r\\n    fill-opacity:1;\\r\\n    opacity:1;\\r\\n}\\r\\n\\r\\n\\r\\n.ap-control.my-geoloc\\r\\n{\\r\\n    top: 10em;\\r\\n}\\r\\n\\r\\n\\r\\n.ap-control.my-attribution.btn, div.ap-control.my-attribution\\r\\n{\\r\\n    top: 13em;\\r\\n}\\r\\n\\r\\n\\r\\n.ap-control.my-layer-ctrl.btn, div.ap-control.my-layer-ctrl\\r\\n{\\r\\n    top: 16em;\\r\\n}\\r\\n\\r\\n\\r\\n.ap-control.my-menu\\r\\n{\\r\\n    left: 0.5em;\\r\\n    top:1em;\\r\\n}\\r\\n\\r\\n\\r\\ndiv.ap-control.my-attribution\\r\\n{\\r\\n    background-color: rgba(255,255,255,0.5);\\r\\n}\\r\\n\\r\\n\\r\\ndiv.ap-control.my-layer-ctrl\\r\\n{\\r\\n    background-color: rgba(255,255,255,0);\\r\\n}\\r\\n\\r\\n\\r\\ndiv.ap-control.my-attribution, div.ap-control.my-layer-ctrl\\r\\n{\\r\\n    \\r\\n    \\r\\n    padding: 0.2em;\\r\\n    right: 3.75em;\\r\\n    min-height:2.25em;\\r\\n    max-width:50%;\\r\\n\\r\\n}\\r\\n\\r\\n\\r\\n.layer-prew\\r\\n{\\r\\n    max-width: 10em;\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbXktbWFwL215LW1hcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUE7SUFDSSxhQUFhO0FBQ2pCOzs7QUFHQTs7SUFFSSxXQUFXO0lBQ1gsY0FBYztJQUNkLFlBQVk7SUFDWixjQUFjO0lBQ2QsU0FBUztBQUNiOzs7QUFHQTs7SUFFSSxTQUFTO0FBQ2I7OztBQUVBOztJQUVJLFNBQVM7QUFDYjs7O0FBRUE7O0lBRUksU0FBUztBQUNiOzs7QUFDQTs7SUFFSSxXQUFXO0lBQ1gsT0FBTztBQUNYOzs7QUFFQTs7SUFFSSx1Q0FBdUM7QUFDM0M7OztBQUNBOztJQUVJLHFDQUFxQztBQUN6Qzs7O0FBQ0E7Ozs7SUFJSSxjQUFjO0lBQ2QsYUFBYTtJQUNiLGlCQUFpQjtJQUNqQixhQUFhOztBQUVqQjs7O0FBRUE7O0lBRUksZUFBZTtJQUNmLGVBQWU7QUFDbkIiLCJmaWxlIjoic3JjL2FwcC9teS1tYXAvbXktbWFwLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbiNtYXAge1xyXG4gICAgaGVpZ2h0OiAxMDB2aDtcclxufVxyXG5cclxuXHJcbi5nZW8tZG90IGNpcmNsZVxyXG57XHJcbiAgICBzdHJva2U6I2ZmZjtcclxuICAgIHN0cm9rZS13aWR0aDozO1xyXG4gICAgZmlsbDojMkE5M0VFO1xyXG4gICAgZmlsbC1vcGFjaXR5OjE7XHJcbiAgICBvcGFjaXR5OjE7XHJcbn1cclxuXHJcblxyXG4uYXAtY29udHJvbC5teS1nZW9sb2Ncclxue1xyXG4gICAgdG9wOiAxMGVtO1xyXG59XHJcblxyXG4uYXAtY29udHJvbC5teS1hdHRyaWJ1dGlvbi5idG4sIGRpdi5hcC1jb250cm9sLm15LWF0dHJpYnV0aW9uXHJcbntcclxuICAgIHRvcDogMTNlbTtcclxufVxyXG5cclxuLmFwLWNvbnRyb2wubXktbGF5ZXItY3RybC5idG4sIGRpdi5hcC1jb250cm9sLm15LWxheWVyLWN0cmxcclxue1xyXG4gICAgdG9wOiAxNmVtO1xyXG59XHJcbi5hcC1jb250cm9sLm15LW1lbnVcclxue1xyXG4gICAgbGVmdDogMC41ZW07XHJcbiAgICB0b3A6MWVtO1xyXG59XHJcblxyXG5kaXYuYXAtY29udHJvbC5teS1hdHRyaWJ1dGlvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDAuNSk7XHJcbn1cclxuZGl2LmFwLWNvbnRyb2wubXktbGF5ZXItY3RybFxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDApO1xyXG59XHJcbmRpdi5hcC1jb250cm9sLm15LWF0dHJpYnV0aW9uLCBkaXYuYXAtY29udHJvbC5teS1sYXllci1jdHJsXHJcbntcclxuICAgIFxyXG4gICAgXHJcbiAgICBwYWRkaW5nOiAwLjJlbTtcclxuICAgIHJpZ2h0OiAzLjc1ZW07XHJcbiAgICBtaW4taGVpZ2h0OjIuMjVlbTtcclxuICAgIG1heC13aWR0aDo1MCU7XHJcblxyXG59XHJcblxyXG4ubGF5ZXItcHJld1xyXG57XHJcbiAgICBtYXgtd2lkdGg6IDEwZW07XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiJdfQ== */\"","import { Component, OnInit, ViewChild, ElementRef, Self, HostListener } from '@angular/core';\r\nimport { API_KEY_BING } from './api-key-bing'\r\nimport{Router, ActivatedRoute} from '@angular/router'\r\nimport { debounceTime, filter } from 'rxjs/operators';\r\n\r\nimport { SentieriLayerService } from '../services/my-map/sentieri-layer.service'\r\nimport { PreviewService } from '../services/communication/preview.service'\r\n\r\n\r\nimport { environment } from '../../environments/environment';\r\n\r\n\r\n// import 'ol/ol.css';\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport {Tile as TileLayer, Vector as VectorLayer} from 'ol/layer';\r\nimport {BingMaps as BingSource, OSM as OSMSource, XYZ ,Vector as VectorSource } from 'ol/source';\r\nimport {fromLonLat} from 'ol/proj';\r\nimport {Feature } from 'ol/Feature';\r\nimport {Select as SelectInteraction} from 'ol/interaction';\r\nimport {defaults as controlDefaults, Control} from 'ol/control'\r\nimport{easeIn, easeOut} from 'ol/easing';\r\n\r\n\r\nimport { GeolocControl } from '../ol-custom/controls/geoloc-control';\r\nimport { MyAttributionControl } from '../ol-custom/controls/my-attribution-control';\r\nimport { LayerControl } from '../ol-custom/controls/layer-control';\r\nimport { VectorStyleType } from '../services/my-map/vector-styles';\r\nimport { DescRefTypes } from '../om/desc-references';\r\nimport { SidebarDataService } from '../services/communication/sidebar-data.service';\r\nimport { TrailHeaderData } from '../om/trail-header-data';\r\nimport { TrailsService } from '../services/trails/trails.service';\r\nimport { ImgUrlPipe } from '../pipes/img-url.pipe';\r\nimport { Lightbox } from 'ngx-lightbox';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst LAYER_ROAD:string ='Road'\r\nconst LAYER_AERIAL:string ='Aerial'\r\nconst LAYER_AERIAL_LBLS:string ='AerialWithLabels'\r\nconst LAYER_ARC_GIS:string ='ArcGIS'\r\nconst LAYER_OPEN_TOPO:string ='OpenTopoMap'\r\n\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-my-map',\r\n  templateUrl: './my-map.component.html',\r\n  styleUrls: ['./my-map.component.css'],\r\n  providers: [SentieriLayerService]\r\n})\r\nexport class MyMapComponent implements OnInit {\r\n  geolocControl: GeolocControl;\r\n  attributionControl:MyAttributionControl\r\n  layerControl: LayerControl;\r\n\r\n  @ViewChild(\"geolocBtn\", { read: ElementRef, static: true }) \r\n  geolcationButtonElement: ElementRef;\r\n\r\n  @ViewChild(\"attributionCtrl\", { read: ElementRef, static: true }) \r\n  attributionControlElement: ElementRef;\r\n\r\n  @ViewChild(\"LayerCtrl\", { read: ElementRef, static: true }) \r\n  layerControlElement: ElementRef;\r\n\r\n\r\n\r\n\r\n  private map:Map\r\n  private routerLinkPath : string;\r\n  private activeTrailLayer : VectorLayer\r\n  private intersectClickInteractionConfigured = false;\r\n  \r\n\r\n\r\n  constructor(  \r\n    private sentieriLayerService: SentieriLayerService,\r\n    private router:Router,\r\n    private activatedRoute: ActivatedRoute,\r\n    private previewService:PreviewService,\r\n    private sidebarDataService: SidebarDataService,\r\n    private trailsService : TrailsService,\r\n    private lightBox : Lightbox,\r\n    private imgPipe : ImgUrlPipe, ){ }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n\r\n    this.activatedRoute.url.subscribe(url =>\r\n      {\r\n        this.sidebarDataService.setMainActiveByRoute(url);\r\n        this.routerLinkPath = url[0].path;\r\n      } );\r\n\r\n\r\n\r\n    var attributionArcGIS = 'Tiles &copy; <a href=\"http://services.arcgisonline.com/ArcGIS/' +\r\n         'rest/services/World_Topo_Map/MapServer\">ArcGIS</a>';\r\n    var attributionAP ='Tiles &copy; <a href=\"http://www.abbadiapasseggiate.altervista.org\">ABBADIA PASSEGGIATE</a>';\r\n    var layersPrimariMap: { [property: string]: any } = {};\r\n    layersPrimariMap[LAYER_ROAD] = null;\r\n    layersPrimariMap[LAYER_AERIAL] = null;\r\n    layersPrimariMap[LAYER_AERIAL_LBLS] = null;\r\n\r\n    \r\n\r\n    var layersMap = {\r\n      layersPrimariMap: layersPrimariMap,\r\n      overlaysAP: {}\r\n    }\r\n\r\n    var layers = [];\r\n    Object.keys(layersPrimariMap).forEach(property => {\r\n      let layer = new TileLayer({\r\n        visible: false,\r\n        preload: Infinity,\r\n        source: new BingSource({\r\n          key: API_KEY_BING.key,\r\n          imagerySet: property\r\n        })\r\n      })\r\n\r\n      layers.push(layer);\r\n      layer.isCtrVisible = property != LAYER_ROAD;\r\n      layer.isSentieriVisible = true;\r\n      layersPrimariMap[property] = layer;\r\n\r\n\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n    layersPrimariMap[LAYER_ARC_GIS] = new TileLayer({\r\n      source: new XYZ({\r\n        attributions: [attributionArcGIS],\r\n        url: 'http://server.arcgisonline.com/ArcGIS/rest/services/' +\r\n          'World_Topo_Map/MapServer/tile/{z}/{y}/{x}'\r\n\r\n\r\n      })\r\n    })\r\n    layersPrimariMap[LAYER_ARC_GIS].isSentieriVisible = true;\r\n    layers.push(layersPrimariMap[LAYER_ARC_GIS]);\r\n\r\n    layersPrimariMap[LAYER_OPEN_TOPO] = new TileLayer({\r\n      source: new OSMSource({\r\n        attributions: [\r\n          'Kartendaten: © <a href=\"https://openstreetmap.org/copyright\">OpenStreetMap</a>-Mitwirkende, SRTM | Kartendarstellung: © <a href=\"http://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)' \r\n        ],\r\n        url: 'https://{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png'\r\n      })\r\n    });\r\n    layers.push(layersPrimariMap[LAYER_OPEN_TOPO]);\r\n\r\n    layersMap.overlaysAP[\"ctr\"] = new TileLayer({\r\n      opacity: 0.3,\r\n      minResolution: 0.5,\r\n      maxResolution: 6,\r\n      visible: true,\r\n      source: new XYZ({\r\n        attributions: [attributionAP],\r\n        url: environment.protocolName + environment.tileServerName +  '/tiles/trasCTR/{z}/{x}/{-y}.png',\r\n        minZoom: 14,\r\n        maxZoom: 18\r\n      })\r\n    })\r\n\r\n    layers.push(layersMap.overlaysAP[\"ctr\"]);\r\n\r\n\r\n    layersMap.overlaysAP[\"sentieri\"] = this.sentieriLayerService.getSentieri();\r\n    layers.push(layersMap.overlaysAP[\"sentieri\"]);\r\n\r\n\r\n\r\n\r\n    \r\n    var view:View = new View({\r\n      center: fromLonLat([9.351, 45.89910]),\r\n      zoom: 15,\r\n      maxZoom : 18, \r\n      minZoom : 5\r\n    });\r\n\r\n    let zoomInEl :HTMLElement = document.createElement(\"i\");\r\n    zoomInEl.innerText = \"add\";\r\n    zoomInEl.className = \"material-icons\"\r\n\r\n    let zoomOutEl :HTMLElement = document.createElement(\"i\");\r\n    zoomOutEl.innerText = \"remove\";\r\n    zoomOutEl.className = \"material-icons\"\r\n\r\n    let rotateEl :HTMLElement = document.createElement(\"i\");\r\n    rotateEl.innerText = \"navigation\";\r\n    rotateEl.className = \"material-icons\"\r\n    \r\n    let controls: Control = controlDefaults(\r\n      {\r\n        attribution:false,\r\n        rotate : true,\r\n        rotateOptions:\r\n        {\r\n          label: rotateEl,\r\n          // autoHide:false, // for always visible\r\n          className:  \"ap-control btn btn-outline-aplight tras02 my-rot\"\r\n        },\r\n        zoom: true,\r\n        zoomOptions : \r\n        {\r\n          className : \"ap-control btn btn-outline-aplight tras02 my-zoom\",\r\n          zoomInLabel: zoomInEl,\r\n          zoomOutLabel: zoomOutEl\r\n        }\r\n      }\r\n    ).getArray();\r\n    \r\n    (controls[0].element.classList as DOMTokenList).remove(\"btn\", \"btn-outline-aplight\",\"ol-control\", \"ol-unselectable\");\r\n    (controls[1].element.classList as DOMTokenList).remove(\"btn\", \"btn-outline-aplight\",\"ol-control\", \"ol-unselectable\");                                \r\n    \r\n    \r\n    \r\n    this.map = new Map({\r\n      controls: controls,\r\n      target: 'map',\r\n      layers: layers,\r\n      view: view\r\n    });\r\n\r\n\r\n    \r\n    var layerPercorsi : VectorLayer = this.sentieriLayerService.getPercorsi();\r\n    this.map.addLayer(layerPercorsi);\r\n\r\n  \r\n    \r\n\r\n    var layerLuoghi : VectorLayer = this.sentieriLayerService.getLuoghi();\r\n    this.map.addLayer(layerLuoghi);\r\n\r\n    // this.checkActiveInteractionLayer(layerLuoghi, layerPercorsi);\r\n\r\n\r\n    // create a Select interaction and add it to the map\r\n    var select : SelectInteraction= new SelectInteraction({\r\n      layers: [layerLuoghi, layerPercorsi],\r\n      style: this.sentieriLayerService.getFunctionStyle(VectorStyleType.Percorsi, true),\r\n      hitTolerance : 7\r\n    });\r\n\r\n\r\n    this.map.addInteraction(select);\r\n\r\n    // use the features Collection to detect when a feature is selected,\r\n    // the collection will emit the add event\r\n    var selectedFeatures = select.getFeatures();\r\n  \r\n    selectedFeatures.on('add',  (event) => {\r\n      var feature = event.target.item(0);\r\n      let interactId = feature.getProperties().interactId;\r\n      this.onAddSelectedFeature(feature, interactId);\r\n      // if it's a trail i immediately remove it... Better use another interaction type in future\r\n      if(interactId == DescRefTypes.Trail)\r\n        selectedFeatures.clear(); \r\n      else if (interactId == DescRefTypes.Location)\r\n        this.previewService.setTrailHeaderData(null);\r\n    });\r\n\r\n\r\n    this.previewService.isOpen$.subscribe(isOpen => \r\n    {\r\n      if(!isOpen)\r\n      {\r\n        selectedFeatures.clear(); \r\n        this.previewService.setTrailHeaderData(null);\r\n      }\r\n    })\r\n\r\n    this.previewService.newRef$.subscribe(newRef => \r\n    { \r\n      this.router.navigate([{ outlets: { luoghiPopup: ['luoghiPrewiew', newRef.id, newRef.type]} }]);\r\n      selectedFeatures.clear();\r\n      let features:Feature[];\r\n      if(newRef.type == DescRefTypes.Location)\r\n      {\r\n        features =layerLuoghi.getSource().getFeatures() as Feature[];\r\n        let newFeature:Feature =features.find(f=> f.getProperties().id == newRef.id);\r\n        selectedFeatures.push(newFeature);\r\n  \r\n      }\r\n      else\r\n      {\r\n        features =layerPercorsi.getSource().getFeatures() as Feature[];\r\n        let newFeature:Feature =features.find(f=> f.getProperties().id == newRef.id);\r\n        if(newFeature)\r\n        {\r\n          this.moveView(newFeature);\r\n        }\r\n          \r\n      }\r\n\r\n\r\n     \r\n    });\r\n\r\n\r\n\r\n    this.activatedRoute.paramMap.subscribe(mapPar=>this.enableMapLayers(mapPar, layerLuoghi, layerPercorsi));\r\n\r\n    this.previewService.trailHeaderData$.subscribe(hd => this.onSingleTrailActivate(hd, layerLuoghi, layerPercorsi));\r\n\r\n\r\n    this.previewService.trailActiveSection$.pipe(\r\n      filter(actscec => !actscec || !actscec.isDummySec()), // this kind of active section is pushed on the stream when the page is loaded the first time\r\n      debounceTime(500))      \r\n    .subscribe(actsec => \r\n    {\r\n      let layerIntersect : VectorLayer = this.getLayerIntesect();\r\n      if(layerIntersect)\r\n      {\r\n        layerIntersect.changed()\r\n      }\r\n      let layerStep :VectorLayer =this.getLayerStep();\r\n      if( !layerStep)\r\n      {\r\n        //that should never happen... better return anyway\r\n         return;\r\n      }\r\n      if(!actsec)\r\n      {\r\n        // this is the case when I scroll to the top\r\n        this.moveView(layerStep.getSource())\r\n        return;\r\n      }\r\n\r\n     \r\n      let source : Feature = layerStep.getSource()\r\n      if(source instanceof VectorSource)\r\n      {\r\n        let activeFeature = source.getFeatures().find(feature => feature.getProperties().id == actsec.featureId);\r\n        if(activeFeature)\r\n        {\r\n          this.moveView(activeFeature);\r\n\r\n        }\r\n      }\r\n      \r\n    });\r\n\r\n    this.geolocControl = new GeolocControl({element: this.geolcationButtonElement.nativeElement}, this.map);\r\n\r\n    this.attributionControl = new MyAttributionControl({element: this.attributionControlElement.nativeElement}, this.map);\r\n    \r\n    this.layerControl = new LayerControl({ element: this.layerControlElement.nativeElement }, layersMap, this.map)\r\n\r\n    this.layerControl.setLayerVisible(LAYER_AERIAL);\r\n\r\n\r\n    \r\n\r\n  }\r\n\r\n  private enableMapLayers(mapPar, locLayer: VectorLayer, trailLayer: VectorLayer) {\r\n    if (mapPar.has(\"loc\") && +mapPar.get(\"loc\") == 1)\r\n      locLayer.setVisible(true);\r\n    else\r\n      locLayer.setVisible(false);\r\n\r\n\r\n    if (mapPar.has(\"trails\") && +mapPar.get(\"trails\") == 1)\r\n      trailLayer.setVisible(true);\r\n    else\r\n      trailLayer.setVisible(false);\r\n  }\r\n\r\n\r\n  private restoreMapLayers(locLayer: VectorLayer, trailLayer: VectorLayer)\r\n  {\r\n    let activeSubEntries  = this.sidebarDataService.getActiveSub(\"map\");\r\n    if(activeSubEntries.some(entry => entry.routerLink == \"loc\"))\r\n      locLayer.setVisible(true);\r\n    else \r\n      locLayer.setVisible(false);\r\n\r\n    if(activeSubEntries.some(entry => entry.routerLink == \"trails\"))\r\n      trailLayer.setVisible(true);\r\n    else \r\n      trailLayer.setVisible(false);\r\n    \r\n  }\r\n\r\n  onAddSelectedFeature(feature : Feature, interactionType: DescRefTypes)\r\n  {\r\n    var locId = feature.getProperties().id;\r\n    this.previewService.setState(true);\r\n    this.router.navigate([{ outlets: { luoghiPopup: ['luoghiPrewiew', locId, interactionType]} }]);\r\n\r\n\r\n    this.moveView(feature);\r\n\r\n   \r\n \r\n\r\n  }\r\n  moveView (input : VectorSource) : void\r\n  moveView (input : Feature) : void\r\n  moveView (input : Feature | VectorSource)\r\n  {\r\n    let mapExtent = this.map.getView().calculateExtent();\r\n    let deltaExtMap = [];\r\n    deltaExtMap[0]= mapExtent[2]-mapExtent[0]; //x\r\n    deltaExtMap[1]= mapExtent[3]-mapExtent[1]; //y\r\n\r\n    if(input instanceof VectorSource)\r\n    {\r\n      let source = input as VectorSource;\r\n      this.moveViewFromExtent(source.getExtent());\r\n    }\r\n    else\r\n    {      \r\n      let feature = input as Feature;\r\n      if(feature.getGeometry().getType() == \"Point\")\r\n      {  \r\n        let featureCord = feature.getGeometry().getCoordinates();\r\n\r\n\r\n        let offset = [];\r\n        if(window.innerWidth < 992)\r\n        {\r\n          offset[0] =  0;\r\n          offset[1] =  deltaExtMap[1]*0.25;\r\n        }\r\n        else if( window.innerWidth < 1200)\r\n        {\r\n          offset[0] =  deltaExtMap[0] *0.3;\r\n          offset[1] =  0;\r\n        }\r\n        else\r\n        {\r\n          offset[0] =  deltaExtMap[0] *0.15;\r\n          offset[1] =  0;\r\n        }\r\n\r\n        for(let i= 0; i< featureCord.length; i++)\r\n        {\r\n          featureCord[i] -= offset[i];\r\n        }\r\n\r\n        \r\n        this.map.getView().animate({\r\n          center: featureCord,\r\n          duration: 1000,\r\n          easing: easeOut\r\n        });\r\n      }\r\n      else\r\n      {\r\n\r\n        let featureExt =feature.getGeometry().getExtent();\r\n        this.moveViewFromExtent(featureExt);\r\n\r\n      }\r\n    }\r\n\r\n    \r\n  }\r\n\r\n\r\n  private moveViewFromExtent(featureExt: any) {\r\n   \r\n    if(!this.checkExtent(featureExt))\r\n    {\r\n      console.warn(\"An invalid extent was passed to moveViewFromExtent\")\r\n      return;\r\n    }\r\n\r\n    let padding = [0, 0, 0, 0];\r\n    if (window.innerWidth < 992) {\r\n      padding[2] = window.innerHeight * 0.5;\r\n    }\r\n    else if (window.innerWidth < 1200) {\r\n      padding[3] = window.innerWidth * 0.6;\r\n    }\r\n    else {\r\n      padding[3] = window.innerWidth * 0.3;\r\n    }\r\n    this.map.getView().fit(featureExt, {\r\n      duration: 1000,\r\n      easing: easeOut,\r\n      padding: padding\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Used to check if an array of number is a valid extent\r\n   * \r\n   * @param featureExtent extent to be check\r\n   */\r\n  private checkExtent(featureExtent : number[]): boolean\r\n  {\r\n    if(!featureExtent)\r\n      return false;\r\n    if(featureExtent.length != 4) \r\n      return false;\r\n    \r\n    for(let vertex of featureExtent)\r\n    {\r\n      if(!isFinite(vertex))\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  private getLayerStep() : VectorLayer\r\n  {\r\n    let layerStep :VectorLayer = (this.map.getLayers().getArray() as any[]).find(layer => layer.getProperties()[\"layerName\"] == \"stepTrail\");\r\n    return layerStep\r\n  }\r\n\r\n  private getLayerIntesect() : VectorLayer\r\n  {\r\n    return (this.map.getLayers().getArray() as any[]).find(layer => layer.getProperties()[\"layerName\"] == \"intersectTrail\");\r\n  }\r\n\r\n\r\n  private onSingleTrailActivate(hd : TrailHeaderData, layerLuoghi : VectorLayer, layerPercorsi : VectorLayer)\r\n  {\r\n    let layerStep :VectorLayer =this.getLayerStep();\r\n    let layerIntersect : VectorLayer = this.getLayerIntesect()\r\n    if(!hd)\r\n    {\r\n      this.restoreMapLayers(layerLuoghi, layerPercorsi);\r\n      if(layerStep)\r\n        layerStep.setVisible(false);\r\n      if(layerIntersect)\r\n        layerIntersect.setVisible(false);\r\n      return;\r\n    }\r\n    \r\n    if(!layerStep)\r\n    {\r\n      layerStep =this.sentieriLayerService.getLayerByName(hd.stepsLayerName, \"stepTrail\");\r\n      this.map.addLayer(layerStep);\r\n    }\r\n    else if(layerStep.getProperties()[\"trailId\"] != hd.id)\r\n    {\r\n      \r\n      layerStep.setSource(this.sentieriLayerService.getVectorSourceByName(hd.stepsLayerName))\r\n    }\r\n\r\n\r\n    if(!layerIntersect)\r\n    {\r\n      layerIntersect =this.sentieriLayerService.getLayerByName(hd.intersectionsLayerName, \"intersectTrail\");\r\n      this.map.addLayer(layerIntersect);\r\n\r\n      this.addClickInteractionToMap(layerIntersect, f =>  this.openLightBoxForIntersection(hd.id, f.getProperties().id)  )\r\n    }\r\n    else if(layerIntersect.getProperties()[\"trailId\"] != hd.id)\r\n    {\r\n      \r\n      layerIntersect.setSource(this.sentieriLayerService.getVectorSourceByName(hd.intersectionsLayerName))\r\n    }\r\n\r\n\r\n    layerPercorsi.setVisible(false);\r\n    layerStep.setVisible(true);\r\n    layerIntersect.setVisible(true);\r\n  }\r\n\r\n\r\n  onMenuClick()\r\n  {\r\n    this.sidebarDataService.setState(true);\r\n  }\r\n\r\n\r\n\r\n  addClickInteractionToMap(layer : VectorLayer, callback : (feature: Feature) => void)\r\n  {\r\n    let clickCondition = (pixel) =>\r\n    {\r\n      var features = [];\r\n      this.map.forEachFeatureAtPixel(\r\n        pixel, \r\n        (feature, lay) => features.push(feature),\r\n        {\r\n          layerFilter: (clickLy => clickLy == layer),\r\n          hitTolerance: 7\r\n        }\r\n        );\r\n\r\n      if(features.length > 0)\r\n      {\r\n        callback(features[0]);\r\n      }\r\n    }\r\n\r\n\r\n    this.map.on('click', (evt) => {\r\n      var pixel = evt.pixel;\r\n      clickCondition(pixel) ;\r\n    });\r\n\r\n  }\r\n\r\n\r\n\r\n  openLightBoxForIntersection(mainTrailId: number, featureId: number): void {\r\n    this.trailsService.getIntersectionImageData(mainTrailId, featureId)\r\n      .subscribe(apPhotos => {\r\n        let lightBoxAlbum = apPhotos.map (image=> \r\n          {\r\n            let desc: string = \"<h5>\" +image.title + \"</h5>\";\r\n            if(image.description != null)\r\n              image.description.forEach(descPar => desc += \"<p>\" + descPar + \"</p> \");\r\n      \r\n            return {\r\n              src : this.imgPipe.transform(image, true) ,\r\n              caption : desc,\r\n              thumb: this.imgPipe.transform(image, false) \r\n              \r\n            } ;\r\n          });\r\n          this.lightBox.open(lightBoxAlbum, 0);\r\n      });\r\n\r\n\r\n  }\r\n\r\n  \r\n\r\n\r\n\r\n  @HostListener('window:resize', ['$event'])\r\n  onResize(event) {\r\n    event.target.innerWidth;\r\n    this.map.updateSize();\r\n  }\r\n}","\r\nimport { geolocationStyle } from '../../services/my-map/vector-styles';\r\nimport { GeolocationData, GeolocationStatus } from '../../om/geolocation-data';\r\n\r\nimport {Control} from 'ol/control';\r\nimport Geolocation from 'ol/Geolocation';\r\nimport Feature from 'ol/Feature';\r\nimport {Vector as VectorLayer} from 'ol/layer';\r\nimport {Vector as VectorSource} from 'ol/source'\r\nimport {Point} from 'ol/geom';\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\n\r\n\r\nexport class GeolocControl extends Control {\r\n    private geolocation: Geolocation;\r\n    geolocationData: GeolocationData;\r\n    private geolocLayer: VectorLayer;\r\n    private originalView : View;\r\n\r\n    \r\n    constructor(option,  map:Map) {\r\n        super(option);\r\n        map.addControl(this);\r\n        this.originalView = new View(\r\n          {\r\n            center: map.getView().getCenter(),\r\n            zoom: map.getView().getZoom()\r\n          }\r\n        ); \r\n        this.setUpGeolocation();\r\n    }\r\n\r\n    private setUpGeolocation() {\r\n        // init without tracking, it will be enable from GUI\r\n        let map = super.getMap();\r\n        this.geolocation = new Geolocation({\r\n          tracking: false,\r\n          projection: map.getView().getProjection(),\r\n          enableHighAccuracy: true\r\n        });\r\n\r\n\r\n        let positionFeature = new Feature();\r\n        positionFeature.setStyle(() => geolocationStyle.POSITION) \r\n      \r\n\r\n\r\n     \r\n        this.geolocationData = new GeolocationData(GeolocationStatus.Disabled);\r\n    \r\n  \r\n        this.geolocation.on('change:position', () => {\r\n          if (this.geolocationData.status== GeolocationStatus.ActiveWithError)\r\n            this.manageLocation(true, false)\r\n          var p = this.geolocation.getPosition();\r\n          this.manageMapViewConfiguration();\r\n          positionFeature.setGeometry(p ?\r\n            new Point(p) : null);\r\n        \r\n        });\r\n    \r\n        this.geolocation.on('error', () =>{\r\n          this.manageLocation(true,true);\r\n        })\r\n    \r\n        let accuracyFeature: Feature = new Feature();\r\n     \r\n        this.geolocation.on('change:accuracyGeometry', () => {\r\n          accuracyFeature.setGeometry(this.geolocation.getAccuracyGeometry());\r\n          accuracyFeature.setStyle(() => geolocationStyle.ACCURANCY);\r\n         \r\n        });\r\n        \r\n        this.geolocLayer = new VectorLayer({\r\n          map: map,\r\n          source: new VectorSource({\r\n            features: [positionFeature, accuracyFeature]\r\n          }),\r\n        });\r\n    }\r\n\r\n    toggleLocation()\r\n  {\r\n    let isTracking:boolean = this.geolocation.getTracking();\r\n    this.manageLocation(!isTracking);\r\n  }\r\n\r\n  private manageLocation(active:boolean, error:boolean = false)\r\n  {\r\n    let locStatus:number\r\n    if(!active){\r\n      locStatus = GeolocationStatus.Disabled;\r\n    }else if (!error){\r\n      locStatus = GeolocationStatus.Active;\r\n    }else{\r\n      locStatus = GeolocationStatus.ActiveWithError;\r\n    }\r\n\r\n    let map = super.getMap();\r\n    this.geolocation.setTracking(active);\r\n    this.geolocationData.status = locStatus;\r\n    this.geolocLayer.setVisible(active && !error);\r\n    map.updateSize();\r\n\r\n    if(!active)\r\n        this.manageMapViewConfiguration();\r\n    \r\n  }\r\n\r\n\r\n  private manageMapViewConfiguration()\r\n  {\r\n    let map = super.getMap();\r\n    if (this.geolocationData.status == GeolocationStatus.Disabled)\r\n    {\r\n        map.getView().setCenter(this.originalView.getCenter());\r\n        map.getView().setZoom(this.originalView.getZoom());\r\n    }\r\n    else if (this.geolocationData.status == GeolocationStatus.Active && this.geolocationData.firstActivation)\r\n    {\r\n        map.getView().setCenter(this.geolocation.getPosition());\r\n        map.getView().setResolution(Math.max(this.geolocation.getAccuracy()/256, this.originalView.getResolution()) );\r\n        this.geolocationData.confirmStatus();\r\n\r\n    }\r\n  }\r\n\r\n\r\n}","import {Control }from 'ol/control';\r\nimport Map from 'ol/Map';\r\n\r\nexport class LayerControl extends Control {\r\n    select;\r\n    collapsed;\r\n    public get layerMap()\r\n    {\r\n        return this._layerMap;\r\n    }\r\n\r\n    public get visibleLayersKeys():string[]\r\n    {\r\n        return Object.keys(this._layerMap.layersPrimariMap);\r\n    }\r\n\r\n    private _activeLayerKey:string\r\n    public get activeLayerKey():string\r\n    {\r\n        return this._activeLayerKey;\r\n    }\r\n    constructor(option, private _layerMap, map:Map) {\r\n        super(option);\r\n        this.select = option.element;\r\n        map.addControl(this);\r\n    }\r\n\r\n    setLayerVisible(chosenStyle: string) {\r\n    \r\n        this._activeLayerKey = chosenStyle;\r\n        Object.keys(this.layerMap.layersPrimariMap).forEach(property => {\r\n            this.layerMap.layersPrimariMap[property].setVisible(property === chosenStyle);\r\n        }, this)\r\n\r\n        if (this.layerMap.overlaysAP) {\r\n            this.layerMap.overlaysAP[\"ctr\"].setVisible(this.layerMap.layersPrimariMap[chosenStyle].isCtrVisible);\r\n            this.layerMap.overlaysAP[\"sentieri\"].setVisible(this.layerMap.layersPrimariMap[chosenStyle].isSentieriVisible);\r\n        }\r\n\r\n    }\r\n\r\n    toggleCollapsed()\r\n    {\r\n        this.collapsed = !this.collapsed;\r\n    }\r\n}","import { ElementRef, DebugElement } from '@angular/core';\r\nimport { Map } from 'ol/map';\r\nimport {Control} from 'ol/control'\r\nimport {Layer} from 'ol/layer'\r\nimport {Tile as TileLayer, Group as GroupLayer} from 'ol/layer';\r\nimport { debug } from 'util';\r\n\r\nexport class MyAttributionControl extends Control {\r\n    attribution:string[];\r\n    collapsed:boolean;\r\n    \r\n    \r\n    constructor(option, map: Map) {\r\n        super(option);\r\n        map.addControl(this);\r\n\r\n        this.attribution = [];\r\n\r\n        let domEl : Element = option.element\r\n        domEl.querySelector(\"div\")\r\n\r\n\r\n        map.getLayers().forEach((layer, index, array) => \r\n        {    \r\n            layer.on('change:visible', (e) =>\r\n            {\r\n\r\n                let currentLayer : Layer= e.target;\r\n\r\n                this.onLayerVisibilityChange(currentLayer, map)\r\n            \r\n\r\n\r\n            });\r\n            this.onLayerVisibilityChange(layer, map);\r\n        });\r\n\r\n    }\r\n\r\n\r\n    onLayerVisibilityChange(currentLayer : Layer, map : Map)\r\n    {\r\n\r\n        if(!currentLayer || (currentLayer instanceof GroupLayer))\r\n        {\r\n            return;\r\n\r\n        }\r\n        \r\n    \r\n        let attributionFunc : any =currentLayer.getSource().getAttributions();\r\n        if (!attributionFunc )\r\n            return;\r\n\r\n        \r\n        let currentAttr : string[] =attributionFunc(\r\n            {\r\n                extent: map.getView().calculateExtent(),\r\n                viewState: map.getView().getState()\r\n            });\r\n        \r\n        // se passa da visibile a non visibile\r\n\r\n        \r\n        currentAttr.forEach( el => \r\n            {\r\n                let index = this.attribution.indexOf(el);\r\n\r\n                // se layer visibile aggiungo solo se non c'è già\r\n                if(currentLayer.getVisible() && index == -1)\r\n                {\r\n                    this.attribution.push(el);\r\n                }else if(!currentLayer.getVisible() && index >= 0)\r\n                {\r\n                    this.attribution.splice(index,1);\r\n                }\r\n            })\r\n    }\r\n\r\n    toggleCollapsed()\r\n    {\r\n        this.collapsed = !this.collapsed ;\r\n    }\r\n}","import { DescReferences } from './desc-references';\r\nimport { LocationData } from './loc-data';\r\n\r\n\r\nexport class ComplexDescriptionData\r\n{\r\n    descriptions:string[][];\r\n    descRefs:DescReferences[][];\r\n\r\n    constructor(locData? :LocationData )\r\n    {\r\n        \r\n        this.descriptions = [];\r\n        this.descRefs = [];\r\n        if(!locData || ! locData.description)\r\n          return;\r\n        if( locData.description.length == 0)\r\n          return;  \r\n        \r\n        \r\n        \r\n    \r\n        for (let j  = 0; j <  locData.description.length; j++)\r\n        { \r\n          let descPar: string =  locData.description[j];\r\n          this.descriptions[j] = descPar.split(/\\{\\d*\\}/);\r\n          this.descRefs[j] = [];\r\n    \r\n          let continueAnalyze : Boolean = true;\r\n          while(continueAnalyze)\r\n          {\r\n            let matchResult :RegExpMatchArray =descPar.match(/\\{\\d*\\}/);\r\n            if (matchResult && matchResult.length > 0)\r\n            {\r\n              descPar = descPar.substr(matchResult.index+matchResult[0].length)\r\n              let id = +matchResult[0].substr(1,1);\r\n              let index =  locData.refs.findIndex( ref => ref.index == id);\r\n              this.descRefs[j].push( locData.refs[index]);\r\n    \r\n            }else\r\n            {\r\n    \r\n              continueAnalyze = false;\r\n            }\r\n          }\r\n         \r\n        }\r\n     \r\n    }\r\n\r\n    \r\n\r\n\r\n}","export enum DescRefTypes\r\n{\r\n    Location =1,\r\n    Trail =2\r\n}\r\n\r\nexport class DescReferences {\r\n    constructor(\r\n        public index:number, \r\n        public id:number,\r\n        public name:string,\r\n        public type: DescRefTypes,\r\n        public oldLink:string\r\n        ){}\r\n}","export class GeolocationData {\r\n    private _previousStatus : GeolocationStatus = GeolocationStatus.Disabled\r\n    private _status: GeolocationStatus =GeolocationStatus.Disabled\r\n\r\n    public set status(status:GeolocationStatus)\r\n    {\r\n        this._previousStatus = this._status;\r\n        this._status = status;\r\n    }\r\n\r\n    public get status():GeolocationStatus\r\n    {\r\n        return this._status;\r\n    }\r\n\r\n    \r\n    public get firstActivation():boolean\r\n    {\r\n        return this._previousStatus == GeolocationStatus.Disabled && this._status != GeolocationStatus.Disabled;\r\n    }\r\n\r\n    public confirmStatus()\r\n    {\r\n        this._previousStatus = this._status;\r\n    }\r\n    \r\n    constructor(\r\n        status:GeolocationStatus\r\n    ){\r\n        this.status = status;\r\n    }\r\n}\r\nexport enum GeolocationStatus\r\n{\r\n    Disabled = 0,\r\n    Active = 1,\r\n    ActiveWithError =2\r\n}","\r\n\r\n\r\n\r\n\r\nexport class APImageData \r\n{\r\n \r\n\r\n\r\n\r\n    constructor\r\n    (\r\n        public id:number,\r\n        public title:string,\r\n        public description: string[],\r\n        public photoname: string,\r\n        public type: APImageTypes,\r\n        public locid: number,\r\n        public ext: string,\r\n        public trailId : number,\r\n        public featureId : number\r\n            )\r\n    {    }\r\n    \r\n}\r\n\r\n\r\nexport enum APImageTypes\r\n{\r\n    small = 0,\r\n    big = 1,\r\n    bigAndSmall=2\r\n\r\n}","import { DescReferences, DescRefTypes } from './desc-references';\r\nimport { MainData } from './main-data';\r\n\r\nexport class LocationData implements MainData{\r\n    public readonly type: DescRefTypes\r\n    \r\n    constructor(\r\n        public id:number, \r\n        public description:string[],\r\n        public name:string,\r\n        public rating=0,\r\n        public refs: DescReferences[]\r\n        ){\r\n            this.type = DescRefTypes.Location;\r\n        }\r\n\r\n    public static clone(oldLoc : LocationData): LocationData\r\n    {\r\n        return new LocationData(oldLoc.id, oldLoc.description, oldLoc.name, oldLoc.rating, oldLoc.refs);\r\n    }\r\n}","import { LocationData } from \"./loc-data\";\r\nimport { TrailHeaderData } from \"./trail-header-data\";\r\nimport { APImageData } from './img-data';\r\nimport { DescReferences } from './desc-references';\r\nimport { MainData } from './main-data';\r\nimport { PreviewResponse } from './prev.response';\r\n\r\nexport class LocationPreviewResponse implements PreviewResponse {\r\n    public     mainData :LocationData;\r\n    public     trailRefs : DescReferences[];\r\n    public     imagesData: APImageData[];\r\n    \r\n    constructor\r\n    (\r\n        oldLoc: LocationPreviewResponse\r\n    )\r\n    {\r\n        this.mainData =  LocationData.clone( oldLoc.mainData);\r\n        this.trailRefs = oldLoc.trailRefs;\r\n        this.imagesData = oldLoc.imagesData;\r\n    }\r\n\r\n    \r\n    \r\n}","export class MenuEntryData\r\n{\r\n    public constructor(\r\n        public readonly defName:string,\r\n        public readonly translKey: string,\r\n        public readonly routerLink: string,\r\n        private _status: MenuEntryStatus,\r\n        public readonly isExclusive = true\r\n    ){}\r\n\r\n    public get status():MenuEntryStatus\r\n    {\r\n        return this._status;\r\n    }\r\n\r\n    public setActive()\r\n    {        \r\n        this._status = MenuEntryStatus.Active;\r\n    }\r\n\r\n    public setDefault()\r\n    {\r\n        this._status = MenuEntryStatus.Default;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport enum MenuEntryStatus\r\n{\r\n    Default=0,\r\n    Active=1,\r\n    Disable=-1\r\n}\r\n","export class MenuTree<T>\r\n{\r\n    private _value: T;\r\n    public get value (): T\r\n    {\r\n        return this._value;\r\n    }\r\n\r\n    private _children : T[];\r\n    public get children() : T[]\r\n    {\r\n        // returns a copy\r\n        return this._children.map(c=>c);\r\n    }\r\n\r\n    public constructor(value:T, children?: T[])\r\n    {\r\n        this._value = value;\r\n        if(children)\r\n            this._children  = children\r\n        else\r\n            this._children  = [];\r\n        \r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n","import { APImageData } from './img-data';\r\nimport { DescReferences } from './desc-references';\r\n\r\n/**\r\n * It represents a paragraph with reference informations\r\n */\r\nexport class ParWithRefs \r\n{\r\n    public descriptions : string [];\r\n    public descRefs: DescReferences[];\r\n    \r\n    constructor(\r\n        description : string,\r\n        initDescRefs: DescReferences[],\r\n        public parIndex : number\r\n    ) {\r\n        \r\n        this.descriptions = [];\r\n        \r\n        if(!description )\r\n          return;\r\n        \r\n        \r\n        \r\n\r\n        \r\n        this.descriptions = description.split(/\\{\\d*\\}/);\r\n        this.descRefs = [];\r\n\r\n        let continueAnalyze : Boolean = true;\r\n        while(continueAnalyze)\r\n        {\r\n            let matchResult :RegExpMatchArray =description.match(/\\{\\d*\\}/);\r\n            if (matchResult && matchResult.length > 0)\r\n            {\r\n                description = description.substr(matchResult.index+matchResult[0].length)\r\n                let id = +matchResult[0].substr(1,1);\r\n                let index =  initDescRefs.findIndex( ref => ref.index == id);\r\n                this.descRefs.push( initDescRefs[index]);\r\n\r\n            }else\r\n            {\r\n\r\n                continueAnalyze = false;\r\n            }\r\n        }\r\n        \r\n     \r\n     \r\n    }\r\n\r\n    public static generatePar(input : ParWithRefsInput): ParWithRefs\r\n    {\r\n        if(!input)\r\n            return null;\r\n        return new ParWithRefs(input.description, input.ref, input.parIndex);\r\n\r\n\r\n    }\r\n\r\n    \r\n\r\n    \r\n}\r\n\r\n\r\nexport interface ParWithRefsInput\r\n{\r\n    description : string;\r\n    ref:DescReferences[];\r\n    parIndex: number\r\n\r\n}","import { APImageData } from './img-data';\r\nimport { MainData } from './main-data';\r\nimport { DescRefTypes } from './desc-references';\r\nimport { ParWithRefs, ParWithRefsInput } from './par-with-refs';\r\n\r\nexport class TrailHeaderData implements MainData {\r\n    public readonly type: DescRefTypes ;\r\n    \r\n    constructor(\r\n        \r\n        public id:number, \r\n        public pars:ParWithRefs[],\r\n        public name:string,\r\n        public level,\r\n        public rating=0,\r\n        public stepsLayerName: string,\r\n        public intersectionsLayerName : string\r\n        )\r\n    {\r\n        this.type  = DescRefTypes.Trail;\r\n    }\r\n    \r\n    public static generateMainData(input :TrailHeaderDataInput)\r\n    {\r\n        return new TrailHeaderData(\r\n                                    input.id, \r\n                                    input.pars.map(inPar => ParWithRefs.generatePar(inPar)).sort((par1,par2)=> par1.parIndex - par2.parIndex),\r\n                                    input.name, \r\n                                    input.level, \r\n                                    input.rating,\r\n                                    input.stepsLayerName,\r\n                                    input.intersectionsLayerName);\r\n    }\r\n\r\n}\r\n\r\nexport interface TrailHeaderDataInput\r\n{\r\n    id:number;\r\n    name:string;\r\n    level:number;\r\n    rating:number;\r\n    pars:ParWithRefsInput[];\r\n    stepsLayerName: string;\r\n    intersectionsLayerName : string;\r\n\r\n}","import { DescReferences } from './desc-references';\r\nimport { ParWithRefs, ParWithRefsInput } from './par-with-refs';\r\n\r\nexport class TrailParDesc extends ParWithRefs\r\n{\r\n\r\n    constructor(\r\n        description : string,\r\n        initDescRefs: DescReferences[],\r\n        parIndex : number,\r\n        public mainTrailsID:number,\r\n        public featureId: number,\r\n        public intersectionFeatureIds : number[]\r\n\r\n        //TODO  add here and on the db an array of intersection feature ids. \r\n        //      in the feature will be saved a referece to the location id (new kind of location for it), that will link to a photo\r\n\r\n\r\n    )\r\n    {\r\n        super(description, initDescRefs, parIndex);\r\n    }\r\n\r\n\r\n    isDummySec() : boolean\r\n    {\r\n        return this.parIndex == -1;\r\n    }\r\n\r\n\r\n\r\n    public static generatePar(input : TrailParDescInput): TrailParDesc\r\n    {\r\n        if(!input)\r\n            return null;\r\n        return new TrailParDesc(input.description, input.ref, input.parIndex, input.mainTrailsID, input.featureId, input.intersectionFeatureIds);\r\n    }\r\n\r\n    public static getDummyTrailParDesc() :TrailParDesc\r\n    {\r\n        return new TrailParDesc(null, [],-1, -1, -1, []);\r\n    }\r\n\r\n\r\n    \r\n}\r\n\r\nexport interface TrailParDescInput extends ParWithRefsInput\r\n{\r\n    mainTrailsID:number;\r\n    featureId: number;\r\n    intersectionFeatureIds : number[];\r\n}","import { TrailHeaderData, TrailHeaderDataInput } from \"./trail-header-data\";\r\nimport { PreviewResponse } from './prev.response';\r\nimport { TrailParDesc, TrailParDescInput } from './trail-par-desc';\r\n\r\nexport class TrailPreviewResponse implements PreviewResponse {\r\n    public     mainData :TrailHeaderData;\r\n    public     pars: TrailParDesc[]\r\n    \r\n    constructor(inputLoc: TrailPreviewResponseInput)\r\n    {\r\n        this.mainData =  TrailHeaderData.generateMainData( inputLoc.mainData);\r\n        this.pars = inputLoc.pars.map(inPars =>TrailParDesc.generatePar( inPars)).sort((par1,par2)=> par1.parIndex - par2.parIndex);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport interface TrailPreviewResponseInput\r\n{\r\n    mainData: TrailHeaderDataInput;\r\n    pars : TrailParDescInput[];\r\n}","module.exports = \".navbar {\\n  padding: 1em 0.5em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGhvdG8vQzpcXFVzZXJzXFxQYW9sb1xcU3ZpbHVwcG9cXEFiYmFkaWFQYXNzZWdnaWF0ZVxcQWJiYWRpYVBhc3NlZ2dpYXRlL3NyY1xcYXBwXFxwaG90b1xccGhvdG8uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3Bob3RvL3Bob3RvLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUksa0JBQUE7QUNBSiIsImZpbGUiOiJzcmMvYXBwL3Bob3RvL3Bob3RvLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm5hdmJhclxyXG57XHJcbiAgICBwYWRkaW5nOiAxZW0gMC41ZW07XHJcbn0iLCIubmF2YmFyIHtcbiAgcGFkZGluZzogMWVtIDAuNWVtO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { SidebarDataService } from '../services/communication/sidebar-data.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-photo',\r\n  templateUrl: './photo.component.html',\r\n  styleUrls: ['./photo.component.scss']\r\n})\r\nexport class PhotoComponent implements OnInit {\r\n\r\n  photos : string [] = [\"foto 1\", \"foto 2\", \"foto 3\", \"foto 4\", \"foto 5\", \"foto 6\"]\r\n  constructor(\r\n    private sidebarDataService : SidebarDataService,\r\n    private activatedRoute : ActivatedRoute\r\n    ) { }\r\n\r\n  ngOnInit() {\r\n    this.activatedRoute.url.subscribe(url => this.sidebarDataService.setMainActiveByRoute(url));\r\n  }\r\n\r\n\r\n  onMenuClick()\r\n  {\r\n    this.sidebarDataService.setState(true);\r\n  }\r\n\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { APImageData, APImageTypes } from '../om/img-data';\nimport { environment } from  '../../../src/environments/environment';\n\n@Pipe({\n  name: 'imgUrl'\n})\nexport class ImgUrlPipe implements PipeTransform {\n\n  transform(value: APImageData, maxSize:boolean =false): string {\n    let imgFolder=\"img\"\n    switch(value.type)\n    {\n        case APImageTypes.small:   \n            return environment.protocolName + environment.serverName +'/' + imgFolder + '/small/' + value.photoname + \".\" + value.ext;\n        case APImageTypes.big:\n            return environment.protocolName + environment.serverName +'/' + imgFolder +'/big/' + value.photoname + \".\" + value.ext;\n        case APImageTypes.bigAndSmall:\n            if(maxSize)\n            {\n                return environment.protocolName + environment.serverName +'/' + imgFolder  +'/big/' + value.photoname + \".\" + value.ext;\n            }else\n            {\n                return environment.protocolName + environment.serverName +'/' + imgFolder  +'/small/' + value.photoname + \".\" + value.ext;\n            }\n        default:\n            return '';\n\n    }\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Subject, BehaviorSubject }    from 'rxjs';\nimport { DescReferences, DescRefTypes } from '../../om/desc-references';\nimport { TrailHeaderData } from '../../om/trail-header-data';\nimport { TrailParDesc } from '../../om/trail-par-desc';\n\n@Injectable()\nexport class PreviewService {\n\n  private isOpenSource = new Subject<boolean>();\n  private newRef = new Subject<DescReferences>();\n  private trailHeaderData = new Subject<TrailHeaderData>();\n  private trailActiveSection = new BehaviorSubject<TrailParDesc>(null);\n\n\n  constructor() { }\n\n  isOpen$ = this.isOpenSource.asObservable();\n  newRef$ = this.newRef.asObservable();\n  trailHeaderData$ = this.trailHeaderData.asObservable();\n  trailActiveSection$= this.trailActiveSection.asObservable();\n\n  // Service message commands\n  setState(isOpen: boolean) {\n    this.isOpenSource.next(isOpen);\n  }\n\n  setNewRef(ref:DescReferences )\n  {\n    this.newRef.next(ref);\n    if(ref.type == DescRefTypes.Location)\n    {\n      this.setTrailHeaderData(null);\n    }\n  }\n\n  setTrailHeaderData(hd : TrailHeaderData)\n  {\n    this.trailHeaderData.next(hd);\n  }\n\n  setTrailActiveSection(as : TrailParDesc)\n  {\n    this.trailActiveSection.next(as);\n  }\n\n  getTrailActiveSectionCurrentVal() : TrailParDesc\n  {\n    return this.trailActiveSection.value;\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport {UrlSegment, Router} from '@angular/router';\nimport {  BehaviorSubject }    from 'rxjs';\nimport { MenuTree } from '../../om/menu-tree';\nimport { MenuEntryData, MenuEntryStatus } from '../../om/menu-entry-data';\n\n@Injectable()\nexport class SidebarDataService {\n  \n  // As from documentation: A Subject that requires an initial value and emits its current value to new subscribers\n  // that's the best option in this case\n  private isOpen = new BehaviorSubject<boolean>(false);\n\n  public readonly menuEntries : MenuTree<MenuEntryData>[];\n\n  constructor(private router: Router) \n  {\n    this.menuEntries = [];\n    let menuEntry = new MenuEntryData (\"Mappa\", \"map\", \"map\", MenuEntryStatus.Default, );\n    let menuSubEntry1 = new MenuEntryData (\"Mostra Luoghi\", \"loc\", \"loc\", MenuEntryStatus.Default, false);\n    let menuSubEntry2 = new MenuEntryData (\"Mostra Percorsi\", \"trails\", \"trails\", MenuEntryStatus.Default, false);\n    this.menuEntries.push (new MenuTree<MenuEntryData> (menuEntry, [menuSubEntry1,menuSubEntry2] ));\n\n    menuEntry = new MenuEntryData (\"Photos\", \"photo\", \"photo\", MenuEntryStatus.Default);\n    this.menuEntries.push (new MenuTree<MenuEntryData> (menuEntry));\n\n    menuEntry = new MenuEntryData (\"Link\", \"links\", \"\", MenuEntryStatus.Disable);\n    this.menuEntries.push (new MenuTree<MenuEntryData> (menuEntry));\n  }\n\n  isOpen$ = this.isOpen.asObservable();\n\n  // Service message commands\n  setState(isOpen: boolean) {\n    this.isOpen.next(isOpen);\n  }\n\n  getActiveMainEntryIndex() : number\n  {\n    if(!this.menuEntries)\n      return -1;\n    \n    return this.menuEntries.findIndex(entry => entry.value.status == MenuEntryStatus.Active)\n  }\n\n\n\n  resetSubEntryStatus(mainIndex : number, leaveNotExclusive = false)\n  {\n    for(let i = 0; i < this.menuEntries[mainIndex].children.length; i++)\n    {\n      if(leaveNotExclusive && !this.menuEntries[mainIndex].children[i].isExclusive )\n        continue;\n\n      this.menuEntries[mainIndex].children[i].setDefault();\n    }\n  }\n\n\n  resetMainEntryStatus()\n  {\n    for(let i = 0; i < this.menuEntries.length; i++)\n    {\n      if(this.menuEntries[i].value.status != MenuEntryStatus.Disable)\n        this.menuEntries[i].value.setDefault();\n    }\n  }\n\n  setActiveEntries(selectedMain:number, selectedSub : number, navigate = true)\n  {\n    \n    let activeMainIndex : number= this.getActiveMainEntryIndex();\n    if(activeMainIndex != selectedMain)\n    {\n      if(activeMainIndex >= 0)\n        this.menuEntries[activeMainIndex].value.setDefault();\n      this.menuEntries[selectedMain].value.setActive();\n    }\n    \n    if(selectedSub >= 0)\n    {\n\n      // if the current main index was already selected, I check if the subindex was already active\n      if(activeMainIndex == selectedMain)\n      {\n        let newSelChildren = this.menuEntries[selectedMain].children[selectedSub];\n        if(newSelChildren.status == MenuEntryStatus.Active)\n        {\n          if(!newSelChildren.isExclusive)\n            newSelChildren.setDefault();\n            \n          this.manageNavigation(selectedMain, navigate);\n          return;\n        }\n          \n      }\n\n      if(activeMainIndex >= 0)\n        this.resetSubEntryStatus(activeMainIndex, true);\n      this.menuEntries[selectedMain].children[selectedSub].setActive();\n      \n    }\n    else\n    {\n      if(activeMainIndex >= 0)\n        this.resetSubEntryStatus(activeMainIndex);\n    }\n\n    this.manageNavigation(selectedMain, navigate);\n\n    \n    \n  }\n  setMainActiveByRoute(u: UrlSegment[]): void {\n\n    let path : string =u.reduce<string>((prevVal, curVal, currIndex, array) => prevVal + (currIndex==0? \"\": \"/\") + curVal.path , \"\");\n    \n    this.resetMainEntryStatus();\n    let mainIndex = this.menuEntries.findIndex(entry => entry.value.routerLink == path);\n    this.setActiveEntries(mainIndex,-1, false);\n    this.activateSubEntriesByUrl(mainIndex, u);\n     \n  }\n\n  /**\n   * It activates menu subentries of the provided main index entry based on the optional parameters of the url\n   * \n   * @param mainIndex main menu entry index\n   * @param u urlsegment array\n   */\n  private activateSubEntriesByUrl(mainIndex: number, u: UrlSegment[])\n  {\n    if(!this.menuEntries[mainIndex].children)\n      return;\n\n    for(let url of u)\n    {\n      if(url.parameters)\n      {\n        for(let paramKey of Object.keys( url.parameters))\n        {\n          let index = this.menuEntries[mainIndex].children.findIndex(entry => entry.routerLink == paramKey);\n          if(index >= 0 && this.menuEntries[mainIndex].children[index].status != MenuEntryStatus.Disable)\n          {\n\n            if(+url.parameters[paramKey]==1)\n              this.menuEntries[mainIndex].children[index].setActive();\n            else\n              this.menuEntries[mainIndex].children[index].setDefault();\n          }\n        }\n      }\n    }\n  }\n\n  public getActiveSub(mainIndex: number ) : MenuEntryData[]\n  public getActiveSub(routerLinkPath : string ) : MenuEntryData[]\n  public getActiveSub(param : string | number ) : MenuEntryData[]\n  {\n    let mainIndex;\n    let routerLinkPath;\n    if(typeof param === 'string')\n    {\n      routerLinkPath = param;\n    }\n    else\n    {\n      mainIndex = param;\n    }\n\n    if(!mainIndex)\n    {\n      if(!routerLinkPath)\n      {\n        return;\n      }\n      else\n      {\n        for(let i = 0; i < this.menuEntries.length; i++)\n        {\n          if(this.menuEntries[i].value.routerLink == routerLinkPath)\n          {\n            mainIndex = i;\n            break;\n          }\n        }\n      }\n\n    \n\n\n    }\n    return this.menuEntries[mainIndex].children.filter(entry => entry.status == MenuEntryStatus.Active)\n\n  }\n\n\n  /**\n   * Manages navigation from main index. Active subindexes are passed as optional parameter\n   * @param mainIndex \n   */\n  private manageNavigation(mainIndex : number, navigate = true)\n  {\n    if(!navigate)\n      return;\n    let mainRouterPath = \"/\" + this.menuEntries[mainIndex].value.routerLink;\n\n    let optionalParameters : any = {};\n\n    for(let child of this.menuEntries[mainIndex].children)\n    {\n      if(child.status != MenuEntryStatus.Disable)\n      {\n        optionalParameters[child.routerLink] = child.status;\n      }\n    \n    }\n\n    this.router.navigate([mainRouterPath, optionalParameters]);\n\n\n\n  }\n\n\n\n\n\n}\n\n\n","import { Injectable, LOCALE_ID, Inject } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from '../../../environments/environment';\r\nimport { Observable } from 'rxjs';\r\nimport { LocationPreviewResponse } from '../../om/loc-prev.response';\r\nimport { map} from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class LocationsService {\r\n\r\n  private locale : string;\r\n  constructor(private http : HttpClient, @Inject(LOCALE_ID) locale: string) { \r\n    this.locale = locale;\r\n  }\r\n\r\n  getLocationData(id:number) : Observable<LocationPreviewResponse>\r\n  {\r\n    return this.http.get<LocationPreviewResponse>(environment.protocolName + environment.serverName + `/services/locations/map/${this.locale}/${id}`)\r\n               .pipe( map(locRes => new LocationPreviewResponse( locRes) )) \r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { getVectorStyle, getPointStyle, convertIconName, VectorStyleType } from './vector-styles';\r\nimport { Icon } from 'ol/style';\r\n\r\nimport {Vector as VectorSource} from 'ol/source';\r\nimport {GeoJSON as geoJsonFormat} from 'ol/format';\r\n\r\nimport {Vector as VectorLayer, Group as GroupLayer} from 'ol/layer';\r\nimport { environment } from '../../../environments/environment';\r\nimport { PreviewService } from '../communication/preview.service';\r\nimport { TrailParDesc } from '../../om/trail-par-desc';\r\n\r\n\r\n\r\n\r\n\r\n@Injectable()\r\nexport class SentieriLayerService {\r\n\r\n  constructor( private previewService : PreviewService) { }\r\n\r\n\r\n  \r\n \r\n\r\n  \r\n\r\n  getFunctionStyle(tipoStrada: VectorStyleType, selected : boolean) {\r\n    return (feature: any, resolution)  => {\r\n     \r\n      let styleForLines = getVectorStyle(tipoStrada ,resolution, selected) ;\r\n      \r\n      let styleForPoint;\r\n\r\n      if (styleForLines.getText()) {\r\n        styleForLines.getText().setText(feature.getProperties().name)\r\n      }\r\n\r\n      if(feature.getGeometry().getType()== \"Point\"){\r\n        styleForPoint= getPointStyle(feature, resolution, selected)\r\n        if(tipoStrada == VectorStyleType.PasseggiataSelez)\r\n          this.manageIntersectionLayerVisibility(feature,styleForPoint);\r\n\r\n      }\r\n\r\n      \r\n\r\n\r\n      var stylesForVector = {\r\n        'Point': styleForPoint,\r\n        'LineString': styleForLines,\r\n        'MultiLineString': styleForLines,\r\n        'MultiPoint': styleForPoint,\r\n\r\n      };\r\n      return stylesForVector[feature.getGeometry().getType()];\r\n    }\r\n  }\r\n  getJsonLayerFromUrl(url: string, tipoStrada: VectorStyleType) {\r\n    var vectorSource = new VectorSource({\r\n      format: new geoJsonFormat(),\r\n      url: url,\r\n\r\n    });\r\n\r\n\r\n    return new VectorLayer({\r\n      source: vectorSource,\r\n      minResolution: 0.5,\r\n      maxResolution: 20,\r\n      style: this.getFunctionStyle(tipoStrada, false)\r\n    });\r\n\r\n  }\r\n\r\n  manageIntersectionLayerVisibility(feature, definedStyle  )\r\n  {\r\n    let activeSec : TrailParDesc= this.previewService.getTrailActiveSectionCurrentVal()\r\n    if(activeSec)\r\n    {\r\n      let currentInterFeatIds = activeSec.intersectionFeatureIds\r\n      if(currentInterFeatIds.some(id => id == feature.getProperties().id))\r\n        definedStyle.getImage().setScale( 1.15);\r\n    }\r\n  }\r\n\r\n  getSentieri(){\r\n    let layersPercorsi = [];\r\n\r\n    layersPercorsi.push(this.getJsonLayerFromUrl(environment.protocolName + environment.serverName +'/vector/sentieriUfficiali.json', VectorStyleType.SentieriUfficiali));\r\n    layersPercorsi.push(this.getJsonLayerFromUrl(environment.protocolName + environment.serverName +'/vector/piste.json', VectorStyleType.Piste));\r\n    layersPercorsi.push(this.getJsonLayerFromUrl(environment.protocolName + environment.serverName +'/vector/strade.json', VectorStyleType.Strade));\r\n    layersPercorsi.push(this.getJsonLayerFromUrl(environment.protocolName + environment.serverName +'/vector/traccia.json', VectorStyleType.Tracce));\r\n    layersPercorsi.push(this.getJsonLayerFromUrl(environment.protocolName + environment.serverName +'/vector/tracceImboscate.json', VectorStyleType.Imboscate));\r\n    layersPercorsi.push(this.getJsonLayerFromUrl(environment.protocolName + environment.serverName +'/vector/viandante.json', VectorStyleType.Viandante));\r\n    return new GroupLayer({ layers: layersPercorsi });\r\n  }\r\n\r\n  getLuoghi():VectorLayer{\r\n    return this.getJsonLayerFromUrl(environment.protocolName+ environment.serverName +'/vector/luoghi.json',VectorStyleType.Luoghi)\r\n  }\r\n\r\n  getPercorsi():VectorLayer\r\n  {\r\n    return this.getJsonLayerFromUrl(environment.protocolName+ environment.serverName +'/vector/percorsi.json',VectorStyleType.Percorsi)\r\n  }\r\n\r\n  getLayerByName(layerName:string, layerNameProperties ?: string, vecotrStyleType = VectorStyleType.PasseggiataSelez )\r\n  {\r\n    let layer: VectorLayer = this.getJsonLayerFromUrl(environment.protocolName+ environment.serverName +'/vector/' + layerName + '.json',vecotrStyleType)\r\n    if(layerNameProperties)\r\n    {\r\n      layer.setProperties({\"layerName\" : layerNameProperties});\r\n    }\r\n    return layer;\r\n  }\r\n\r\n  getVectorSourceByName(layerName:string)\r\n  {\r\n    return  new VectorSource({\r\n      format: new geoJsonFormat(),\r\n      url: environment.protocolName+ environment.serverName +'/vector/' + layerName + '.json',\r\n\r\n    });\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n","\r\nimport TextPlacement from 'ol/style/TextPlacement'\r\nimport RegularShape from 'ol/style/RegularShape'\r\n\r\n\r\nimport {Style, Stroke, Fill, Text, Circle, Icon} from  'ol/style';\r\nimport { stringify } from 'querystring';\r\n\r\n\r\n\r\n\r\nexport enum FontSizes\r\n{\r\n    Small,\r\n    Medium,\r\n    Big\r\n}\r\n\r\n\r\nexport enum FontWeights\r\n{\r\n     Default,\r\n     Italic,\r\n     Bold\r\n}\r\nfunction getFont(size:FontSizes, weight:FontWeights = FontWeights.Default)\r\n{\r\n    var fontType= \"sans-serif\"\r\n    var sizeConcat =\"\";\r\n    \r\n\r\n    switch(size){\r\n        case FontSizes.Small:\r\n            sizeConcat += \"14px \";\r\n            break;\r\n        case FontSizes.Medium:\r\n            sizeConcat += \"16px \";\r\n            break;\r\n        case FontSizes.Big:\r\n            sizeConcat += \"20px \";\r\n            break;\r\n    }\r\n\r\n\r\n    let weightConcat = translateFontWeight(weight);\r\n\r\n    return weightConcat +  sizeConcat + fontType \r\n}\r\n\r\nfunction translateFontWeight(weight: FontWeights) {\r\n    var weightConcat =\"\";\r\n    switch (weight) {\r\n        case FontWeights.Bold:\r\n            weightConcat += \"bold \";\r\n            break;\r\n        case FontWeights.Italic:\r\n            weightConcat += \"italic \";\r\n            break;\r\n        case FontWeights.Default:\r\n            weightConcat += \" \";\r\n            break;\r\n    }\r\n    return weightConcat;\r\n}\r\n\r\nfunction modifyFontWeight(currentFontInfo: string, weight:FontWeights)\r\n{\r\n    let info:string[] = currentFontInfo.split(\" \");\r\n    if(info.length > 0)\r\n    {\r\n        info[0] = translateFontWeight(weight);\r\n    }\r\n    return info.reduce<string>((pr,cur,index,array)=> pr + \" \" + cur, \"\");\r\n}\r\n\r\n\r\nexport enum VectorStyleType {\r\n  SentieriUfficiali,\r\n  Piste,\r\n  Strade,\r\n  Tracce,\r\n  Imboscate,\r\n  Viandante,\r\n  Luoghi,\r\n  Percorsi,\r\n  PasseggiataSelez\r\n}\r\n\r\n\r\nexport const ICON_TYPE_PEAK = \"peak\";\r\nexport const ICON_TYPE_WATERFALL = \"cascata\";\r\nexport const ICON_TYPE_HUT = \"rifugio\";\r\nexport const ICON_TYPE_MUSEUM = \"museo\";\r\nexport const ICON_TYPE_VIEWSIGHT = \"vista\";\r\nexport const ICON_TYPE_INFO = \"info\";\r\n\r\n\r\nexport const LOC_TYPE_COMUNE = \"comune\";\r\nexport const LOC_TYPE_FRAZIONE = \"frazione\";\r\nexport const LOC_TYPE_LUOGO = \"luogo\";\r\nexport const LOC_TYPE_INCROCIO = \"intersection\";\r\n\r\n\r\nexport function convertIconName(GeoJSONIconName : string): string\r\n{\r\n    let map = {};\r\n\r\n    map[ICON_TYPE_PEAK] = \"assets/icons/material-design-icons/baseline-terrain-24px.svg\";\r\n    map[ICON_TYPE_WATERFALL] =  \"assets/icons/map-icons/waterfall.svg\";\r\n    map[ICON_TYPE_HUT] = \"assets/icons/material-design-icons/baseline-home-24px.svg\";\r\n    map[ICON_TYPE_MUSEUM] =\"assets/icons/map-icons/museum.svg\";\r\n    map[ICON_TYPE_VIEWSIGHT] = \"assets/icons/map-icons/viewpoint.svg\";\r\n    map[ICON_TYPE_INFO] = \"assets/icons/material-design-icons/baseline-info-24px.svg\";\r\n\r\n\r\n    \r\n\r\n    // if(!map[GeoJSONIconName])\r\n    // {\r\n    //     map[GeoJSONIconName] = map[\"peak\"];\r\n    // }\r\n    return map[GeoJSONIconName];\r\n}\r\n\r\nexport class BootstrapTheme\r\n{\r\n    private static _instance : BootstrapTheme;\r\n    public static get Instance(): BootstrapTheme\r\n    {\r\n        if(!this._instance )\r\n            BootstrapTheme.computeStyles();    \r\n        return this._instance;\r\n        \r\n    }\r\n\r\n    public primary : string;\r\n    public secondary : string;\r\n    public success : string;\r\n    public info : string;\r\n    public warning : string;\r\n    public danger : string;\r\n    public light : string;\r\n    public aplight: string;\r\n    public dark : string;\r\n\r\n    private constructor (){}\r\n\r\n    public static GetRGBA(color: string, opacity:number =1) : number[]\r\n    {\r\n        color = color.trim();\r\n         let pattern : RegExp =  /^#([A-Fa-f0-9]{6})$/ ;\r\n         if(!color.match(pattern))\r\n            return [0, 0,0, opacity];\r\n        color = color.replace(\"#\", \"\");\r\n        let result : number[] = [];\r\n        result.push(parseInt( color.substr(0,2), 16));\r\n        result.push(parseInt( color.substr(2,2), 16));\r\n        result.push(parseInt( color.substr(4,2), 16)); \r\n        result.push( opacity); \r\n        return result;\r\n\r\n    }\r\n    private static  computeStyles(): void\r\n    {\r\n        var style = getComputedStyle(document.body);\r\n\r\n        this._instance = new BootstrapTheme();\r\n        this._instance.primary = style.getPropertyValue('--primary');\r\n        this._instance.secondary = style.getPropertyValue('--secondary');\r\n        this._instance.success = style.getPropertyValue('--success');\r\n        this._instance.info = style.getPropertyValue('--info');\r\n        this._instance.warning = style.getPropertyValue('--warning');\r\n        this._instance.danger = style.getPropertyValue('--danger');\r\n        this._instance.light = style.getPropertyValue('--light');\r\n        this._instance.dark = style.getPropertyValue('--dark');\r\n        this._instance.aplight= style.getPropertyValue('--aplight');\r\n\r\n        \r\n    }\r\n}\r\n\r\n\r\nexport function getVectorStyle(styleType:VectorStyleType, resolution, selected: boolean )\r\n{\r\n    let style : Style = new Style({});\r\n    \r\n    switch(styleType)\r\n    {\r\n        case VectorStyleType.SentieriUfficiali:\r\n            style = new Style({\r\n                stroke: new Stroke({\r\n                    color: 'red',\r\n                    width: resolution < 10? 4 :3,\r\n                    lineDash: [8, 10]\r\n                }),\r\n                text: new Text({\r\n                    font: getFont(FontSizes.Small),\r\n                    placement: TextPlacement.LINE,\r\n                    fill: new Fill({\r\n                        color: 'white'\r\n                    }),\r\n                    stroke: new Stroke({\r\n                        color: 'black',\r\n                        width: resolution < 10 ? 3: 2,\r\n            \r\n                        }),\r\n                    })\r\n                });\r\n            break;\r\n        case VectorStyleType.Viandante:\r\n            style = new Style({\r\n                stroke: new Stroke({\r\n                    color: [255, 102, 204],\r\n                    width: resolution < 10? 4 :3,\r\n                    lineDash: [8, 10]\r\n                }),\r\n                text: new Text({\r\n                    font: getFont(FontSizes.Small),\r\n                    placement: TextPlacement.LINE,\r\n                    fill: new Fill({\r\n                        color: 'white'\r\n                    }),\r\n                    stroke: new Stroke({\r\n                        color: 'black',\r\n                        width: resolution < 10 ? 3: 2,\r\n        \r\n                        }),\r\n                    })\r\n                });\r\n            break;\r\n        case VectorStyleType.Strade:\r\n            style = new Style({\r\n                stroke: new Stroke({\r\n                    color: [196, 196, 196],\r\n                    width: resolution < 10? 7 :5,\r\n                }),\r\n                text: new Text({\r\n                    font: getFont(FontSizes.Small),\r\n                    placement: TextPlacement.LINE,\r\n                    fill: new Fill({\r\n                        color: 'white'\r\n                    }),\r\n                    stroke: new Stroke({\r\n                        color: 'black',\r\n                        width: resolution < 10 ? 3: 2,\r\n        \r\n                        }),\r\n                    })\r\n                });\r\n            break;\r\n\r\n        case VectorStyleType.Piste:\r\n            style=new Style({\r\n                stroke: new Stroke({\r\n                    color: [80, 40, 0],\r\n                    width: resolution < 10? 6 :4,\r\n                }),\r\n                text: new Text({\r\n                    font: getFont(FontSizes.Small),\r\n                    placement: TextPlacement.LINE,\r\n                    fill: new Fill({\r\n                        color: 'white'\r\n                    }),\r\n                    stroke: new Stroke({\r\n                        color: 'black',\r\n                        width: resolution < 10 ? 3: 2,\r\n        \r\n                        }),\r\n                    })\r\n                });\r\n            break;\r\n        case VectorStyleType.Tracce:\r\n            if (resolution < 10)\r\n            {\r\n                style = new Style({\r\n                    stroke: new Stroke({\r\n                        color: [102, 51, 0],\r\n                        width: 3,\r\n                        lineDash: [5, 10]\r\n                        })\r\n                    });\r\n            }\r\n           \r\n            break;\r\n        case VectorStyleType.Imboscate:\r\n            if(resolution < 8)\r\n            {\r\n                style = new Style({\r\n                    stroke: new Stroke({\r\n                        color: [256, 196, 0],\r\n                        width: 2,\r\n                        lineDash: [5, 10]\r\n                        })\r\n                    });\r\n            }\r\n     \r\n           \r\n            break;\r\n        case VectorStyleType.Percorsi:\r\n            let colorStyle = BootstrapTheme.GetRGBA(BootstrapTheme.Instance.aplight    , 0.6);\r\n            if(selected)\r\n                colorStyle[3] = 1;\r\n            style = new Style({\r\n                stroke: new Stroke({\r\n                    color: colorStyle,\r\n                    width: resolution < 10? 4 :3,\r\n                    // lineDash: [8, 10]\r\n                }),\r\n                text: new Text({\r\n                    font: getFont(FontSizes.Small),\r\n                    placement: TextPlacement.LINE,\r\n                    fill: new Fill({\r\n                        color: 'white'\r\n                    }),\r\n                    stroke: new Stroke({\r\n                        color: 'black',\r\n                        width: resolution < 10 ? 3: 2,\r\n            \r\n                        }),\r\n                    })\r\n                });\r\n            break;\r\n        \r\n        case VectorStyleType.PasseggiataSelez:\r\n            \r\n            style = new Style({\r\n                stroke: new Stroke({\r\n                    color: BootstrapTheme.GetRGBA(BootstrapTheme.Instance.aplight  , 1),\r\n                    width: resolution < 10? 4 :3,\r\n                    // lineDash: [8, 10]\r\n                })\r\n            });\r\n            break;\r\n\r\n\r\n        case VectorStyleType.Luoghi:\r\n            style = new Style({\r\n                image: new RegularShape({\r\n                  fill: new Fill({color: 'red'}),\r\n                  stroke: new Stroke({color: 'black', width: 2}),\r\n                  points: 5,\r\n                  radius: 10,\r\n                  radius2: 4,\r\n                  angle: 0\r\n                    })\r\n                });\r\n            break;\r\n\r\n\r\n    }\r\n    return style;\r\n\r\n}\r\n\r\n\r\n\r\nexport function getPointStyle(feature, resolution, selected : boolean) : string\r\n{\r\n    let style : Style;\r\n\r\n    let luogo = feature.getProperties().style\r\n    if (luogo == LOC_TYPE_COMUNE)\r\n    {\r\n        style = new Style({\r\n      \r\n            text: new Text({\r\n                font: getFont(FontSizes.Big),\r\n                fill: new Fill({\r\n                    color: 'white'\r\n                }),\r\n                stroke: new Stroke({\r\n                    color: 'black',\r\n                    width: 4,\r\n    \r\n                    }),\r\n                })\r\n            });\r\n        \r\n    }\r\n    else if (luogo == LOC_TYPE_FRAZIONE)\r\n    {\r\n        style = new Style({\r\n        \r\n            text: new Text({\r\n                font: getFont(FontSizes.Medium),\r\n                fill: new Fill({\r\n                    color: 'white'\r\n                }),\r\n                stroke: new Stroke({\r\n                    color: 'black',\r\n                    width: 3,\r\n    \r\n                    }),\r\n                })\r\n            });\r\n\r\n    }\r\n    else \r\n    {\r\n        style = new Style({\r\n       \r\n            text: new Text({\r\n                font: getFont(FontSizes.Small),\r\n                fill: new Fill({\r\n                    color: 'white'\r\n                }),\r\n                stroke: new Stroke({\r\n                    color: 'black',\r\n                    width: 3,\r\n    \r\n                }),\r\n                offsetY: 16\r\n                })\r\n            });\r\n    }\r\n\r\n    \r\n\r\n    if(luogo == LOC_TYPE_INCROCIO)\r\n    {\r\n        style.getText().setText(\"\");\r\n    }\r\n    else if(resolution < 10 || luogo == LOC_TYPE_COMUNE  )\r\n        style.getText().setText(feature.getProperties().name);\r\n    else\r\n        style.getText().setText(\"\");\r\n\r\n\r\n    let imageName:string = convertIconName(feature.getProperties().icon );\r\n\r\n\r\n    if (imageName && resolution <10)\r\n    {\r\n        let icon = new Icon({\r\n        src: imageName,\r\n        color: 'white',\r\n        scale : resolution < 8 && luogo != LOC_TYPE_INCROCIO ? 1.15 : 0.8,\r\n        anchor: [0.5, 0.7]\r\n        })\r\n        style.setImage(icon);\r\n    }\r\n    else \r\n        style.setImage(null);\r\n\r\n    \r\n\r\n    if (selected)\r\n    {\r\n        let oldStrokeWidth =style.getText().getStroke().getWidth();\r\n        style.getText().getStroke().setWidth(oldStrokeWidth * 0.7);\r\n        style.getText().getStroke().setColor(BootstrapTheme.Instance.primary); \r\n        style.getText().getFill().setColor(BootstrapTheme.Instance.light); \r\n        let fontInfo : string = style.getText().getFont();\r\n        style.getText().setFont(modifyFontWeight(fontInfo, FontWeights.Bold));\r\n    }\r\n\r\n    return style;\r\n\r\n}\r\n\r\n\r\n\r\nexport const geolocationStyle = {\r\n    ACCURANCY : new Style({\r\n        fill: new Fill({\r\n            color: 'rgba(0, 0, 255, 0.2)'\r\n        })\r\n    }),\r\n    POSITION :   new Style({\r\n        image: new Circle({\r\n            radius: 6,\r\n            fill: new Fill({\r\n                color: '#3399CC'\r\n            }),\r\n            stroke: new Stroke({\r\n                color: '#fff',\r\n                width: 2\r\n            })\r\n        })\r\n    })\r\n}","import { Injectable, Inject, LOCALE_ID } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { environment } from '../../../environments/environment';\nimport { Observable } from 'rxjs';\nimport { TrailPreviewResponse, TrailPreviewResponseInput } from '../../om/trail-prev.response';\nimport { map} from 'rxjs/operators';\nimport { APImageData } from '../../om/img-data';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TrailsService {\n\n  private locale : string;\n  constructor(private http : HttpClient,  @Inject(LOCALE_ID) locale: string) { \n    this.locale = locale;\n  }\n\n  getTrailData(id:number) : Observable<TrailPreviewResponse>\n  {\n    return this.http.get<TrailPreviewResponseInput>(environment.protocolName + environment.serverName + `/services/trails/map/${this.locale}/${id}`)\n               .pipe( map(locRes => new TrailPreviewResponse(locRes)) );\n  }\n\n  getIntersectionImageData(trailId:number, featureId: number) : Observable<APImageData[]>\n  {\n    return this.http.get<APImageData[]>(environment.protocolName + environment.serverName + `/services/trails/map/${this.locale}/intersection/${trailId}/${featureId}`);\n  }\n}\n","export const environment = {\r\n  production: true,\r\n  serverName: \"abbadiapasseggiate.herokuapp.com\",\r\n  protocolName: \"https://\",\r\n  tileServerName:\"abbadiapasseggiate-tiles.herokuapp.com\",\r\n  locale : \"en\"\r\n};\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"],"sourceRoot":""}